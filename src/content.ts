import { createPopper, Instance } from "@popperjs/core";
import zxcvbn from 'zxcvbn';

const chessIconSvg = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" height="41px" viewBox="0 0 30 40" version="1.1" style="pointer-events: none">
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(99.215686%,99.215686%,99.215686%);fill-opacity:1;" d="M 18.886719 25.472656 C 18.996094 25.472656 19.101562 25.472656 19.210938 25.472656 C 19.5 25.472656 19.789062 25.472656 20.078125 25.472656 C 20.261719 25.472656 20.441406 25.472656 20.625 25.472656 C 21.257812 25.472656 21.890625 25.472656 22.523438 25.472656 C 23.109375 25.472656 23.699219 25.472656 24.289062 25.472656 C 24.796875 25.46875 25.304688 25.46875 25.808594 25.46875 C 26.113281 25.46875 26.414062 25.46875 26.714844 25.46875 C 27 25.46875 27.285156 25.46875 27.570312 25.46875 C 27.671875 25.46875 27.777344 25.46875 27.882812 25.46875 C 29.28125 25.464844 29.28125 25.464844 29.597656 25.765625 C 30.046875 26.207031 30.003906 26.710938 30.007812 27.300781 C 30.007812 27.429688 30.007812 27.558594 30.007812 27.6875 C 30.007812 27.78125 30.007812 27.875 30.007812 27.96875 C 30.007812 28.21875 30.007812 28.472656 30.007812 28.722656 C 30.007812 28.882812 30.007812 29.039062 30.007812 29.199219 C 30.007812 29.75 30.007812 30.300781 30.007812 30.851562 C 30.007812 31.363281 30.011719 31.878906 30.011719 32.390625 C 30.011719 32.832031 30.011719 33.273438 30.011719 33.714844 C 30.011719 33.976562 30.011719 34.238281 30.011719 34.503906 C 30.011719 34.75 30.011719 35 30.011719 35.246094 C 30.011719 35.335938 30.011719 35.425781 30.011719 35.515625 C 30.019531 37.128906 30.019531 37.128906 29.53125 37.609375 C 28.871094 38.234375 27.820312 38.082031 26.964844 38.085938 C 26.867188 38.085938 26.765625 38.085938 26.667969 38.085938 C 26.347656 38.085938 26.023438 38.089844 25.703125 38.089844 C 25.644531 38.089844 25.589844 38.089844 25.535156 38.089844 C 25.015625 38.089844 24.496094 38.09375 23.972656 38.09375 C 23.3125 38.09375 22.648438 38.097656 21.988281 38.101562 C 21.519531 38.101562 21.050781 38.105469 20.582031 38.105469 C 20.304688 38.105469 20.027344 38.105469 19.746094 38.105469 C 19.484375 38.109375 19.222656 38.109375 18.960938 38.109375 C 18.867188 38.109375 18.769531 38.109375 18.675781 38.109375 C 18.015625 38.117188 17.511719 38.050781 17 37.59375 C 16.5 37.050781 16.472656 36.566406 16.480469 35.867188 C 16.480469 35.769531 16.480469 35.671875 16.480469 35.574219 C 16.480469 35.308594 16.480469 35.042969 16.484375 34.78125 C 16.484375 34.503906 16.484375 34.222656 16.484375 33.945312 C 16.484375 33.480469 16.488281 33.015625 16.488281 32.546875 C 16.492188 31.890625 16.496094 31.234375 16.496094 30.578125 C 16.496094 30.070312 16.496094 29.558594 16.5 29.046875 C 16.5 28.992188 16.5 28.9375 16.5 28.882812 C 16.5 28.566406 16.503906 28.253906 16.503906 27.9375 C 16.503906 27.84375 16.503906 27.75 16.503906 27.652344 C 16.511719 26.128906 16.511719 26.128906 16.855469 25.792969 C 17.378906 25.332031 18.226562 25.472656 18.886719 25.472656 Z M 18.082031 26.964844 C 17.964844 27.101562 17.980469 27.171875 17.984375 27.355469 C 18.015625 27.550781 18.089844 27.660156 18.230469 27.800781 C 18.394531 27.882812 18.5625 27.875 18.738281 27.851562 C 18.910156 27.75 19.035156 27.648438 19.089844 27.457031 C 19.089844 27.199219 19.085938 27.109375 18.90625 26.917969 C 18.582031 26.722656 18.375 26.714844 18.082031 26.964844 Z M 27.433594 27 C 27.347656 27.160156 27.355469 27.277344 27.375 27.457031 C 27.457031 27.636719 27.546875 27.761719 27.726562 27.851562 C 27.933594 27.878906 27.933594 27.878906 28.132812 27.851562 C 28.265625 27.746094 28.355469 27.660156 28.433594 27.507812 C 28.46875 27.214844 28.46875 27.214844 28.320312 26.96875 C 27.992188 26.71875 27.746094 26.703125 27.433594 27 Z M 21.949219 29.722656 C 21.707031 30.078125 21.617188 30.4375 21.667969 30.863281 C 21.753906 31.238281 21.949219 31.464844 22.234375 31.722656 C 22.359375 31.902344 22.3125 32.042969 22.273438 32.246094 C 22.222656 32.445312 22.167969 32.644531 22.113281 32.839844 C 22.078125 32.957031 22.046875 33.070312 22.015625 33.183594 C 21.964844 33.363281 21.914062 33.542969 21.859375 33.722656 C 21.8125 33.898438 21.761719 34.074219 21.714844 34.246094 C 21.699219 34.300781 21.683594 34.355469 21.667969 34.410156 C 21.652344 34.460938 21.636719 34.511719 21.625 34.5625 C 21.613281 34.605469 21.597656 34.652344 21.585938 34.695312 C 21.566406 34.820312 21.574219 34.894531 21.617188 35.011719 C 21.796875 35.019531 21.972656 35.027344 22.152344 35.035156 C 22.203125 35.039062 22.25 35.042969 22.300781 35.042969 C 22.949219 35.074219 23.589844 35.0625 24.234375 35.035156 C 24.332031 35.035156 24.332031 35.035156 24.429688 35.03125 C 24.585938 35.023438 24.742188 35.019531 24.898438 35.011719 C 24.789062 34.570312 24.671875 34.128906 24.542969 33.6875 C 24.53125 33.644531 24.519531 33.597656 24.503906 33.550781 C 24.449219 33.359375 24.394531 33.171875 24.339844 32.980469 C 24.296875 32.839844 24.257812 32.699219 24.214844 32.558594 C 24.199219 32.496094 24.199219 32.496094 24.179688 32.429688 C 24.0625 32.027344 24.0625 32.027344 24.089844 31.851562 C 24.160156 31.792969 24.234375 31.738281 24.304688 31.683594 C 24.542969 31.472656 24.734375 31.136719 24.757812 30.824219 C 24.773438 30.292969 24.660156 29.960938 24.289062 29.570312 C 23.953125 29.265625 23.648438 29.175781 23.199219 29.167969 C 23.160156 29.167969 23.117188 29.167969 23.078125 29.164062 C 22.625 29.160156 22.226562 29.363281 21.949219 29.722656 Z M 18.132812 35.605469 C 18.015625 35.753906 18.007812 35.914062 18.011719 36.101562 C 18.042969 36.265625 18.152344 36.34375 18.28125 36.445312 C 18.445312 36.523438 18.613281 36.523438 18.789062 36.492188 C 18.9375 36.378906 18.9375 36.378906 19.039062 36.246094 C 19.058594 36.230469 19.074219 36.214844 19.089844 36.199219 C 19.121094 35.945312 19.121094 35.945312 19.039062 35.710938 C 18.949219 35.605469 18.863281 35.519531 18.738281 35.457031 C 18.488281 35.4375 18.332031 35.449219 18.132812 35.605469 Z M 27.476562 35.605469 C 27.378906 35.726562 27.371094 35.8125 27.351562 35.96875 C 27.382812 36.207031 27.457031 36.277344 27.625 36.445312 C 27.789062 36.523438 27.957031 36.519531 28.132812 36.492188 C 28.273438 36.40625 28.359375 36.34375 28.433594 36.199219 C 28.464844 35.945312 28.464844 35.945312 28.382812 35.710938 C 28.292969 35.605469 28.207031 35.519531 28.082031 35.457031 C 27.835938 35.433594 27.683594 35.476562 27.476562 35.605469 Z M 27.476562 35.605469 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(99.215686%,99.215686%,99.215686%);fill-opacity:1;" d="M 11.550781 7.59375 C 11.671875 7.59375 11.796875 7.59375 11.917969 7.59375 C 12.175781 7.59375 12.433594 7.59375 12.6875 7.59375 C 13.015625 7.59375 13.339844 7.597656 13.664062 7.597656 C 13.917969 7.597656 14.171875 7.597656 14.425781 7.597656 C 14.546875 7.597656 14.664062 7.597656 14.785156 7.597656 C 15.429688 7.597656 16.074219 7.605469 16.71875 7.625 C 16.808594 7.628906 16.808594 7.628906 16.894531 7.632812 C 17.371094 7.648438 17.835938 7.703125 18.304688 7.785156 C 18.382812 7.800781 18.460938 7.8125 18.539062 7.828125 C 20.550781 8.179688 20.550781 8.179688 21.011719 8.742188 C 21.136719 8.9375 21.125 9.132812 21.09375 9.355469 C 21.035156 9.574219 20.910156 9.710938 20.757812 9.875 C 20.703125 9.9375 20.703125 9.9375 20.648438 10 C 20.390625 10.28125 20.121094 10.550781 19.847656 10.816406 C 19.820312 10.84375 19.792969 10.867188 19.765625 10.894531 C 19.625 11.03125 19.488281 11.164062 19.347656 11.300781 C 19.019531 11.613281 18.71875 11.941406 18.433594 12.296875 C 18.410156 12.328125 18.382812 12.359375 18.359375 12.390625 C 17.742188 13.179688 17.332031 14.082031 17.171875 15.0625 C 16.839844 15.121094 16.515625 15.117188 16.179688 15.117188 C 16.082031 15.117188 16.082031 15.117188 15.984375 15.117188 C 15.8125 15.117188 15.636719 15.117188 15.464844 15.117188 C 15.28125 15.117188 15.097656 15.117188 14.914062 15.117188 C 14.605469 15.117188 14.300781 15.117188 13.992188 15.117188 C 13.636719 15.117188 13.285156 15.117188 12.929688 15.117188 C 12.625 15.117188 12.320312 15.117188 12.015625 15.117188 C 11.832031 15.117188 11.652344 15.117188 11.46875 15.117188 C 11.265625 15.117188 11.0625 15.117188 10.859375 15.117188 C 10.773438 15.117188 10.773438 15.117188 10.679688 15.117188 C 10.351562 15.117188 10.027344 15.101562 9.695312 15.0625 C 9.691406 15.015625 9.683594 14.972656 9.675781 14.925781 C 9.445312 13.671875 8.792969 12.65625 7.910156 11.738281 C 7.8125 11.636719 7.714844 11.53125 7.621094 11.425781 C 7.332031 11.109375 7.019531 10.8125 6.710938 10.515625 C 5.800781 9.648438 5.800781 9.648438 5.796875 9.167969 C 5.792969 9.113281 5.792969 9.058594 5.792969 9 C 5.808594 8.816406 5.839844 8.734375 5.960938 8.59375 C 6.074219 8.515625 6.175781 8.457031 6.296875 8.398438 C 6.332031 8.382812 6.367188 8.363281 6.402344 8.347656 C 7.949219 7.648438 9.878906 7.589844 11.550781 7.59375 Z M 11.550781 7.59375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.823529%,98.823529%,98.823529%);fill-opacity:1;" d="M 9.496094 18.5625 C 9.578125 18.5625 9.65625 18.5625 9.734375 18.5625 C 9.945312 18.5625 10.15625 18.5625 10.367188 18.5625 C 10.589844 18.5625 10.8125 18.5625 11.03125 18.5625 C 11.40625 18.5625 11.777344 18.5625 12.148438 18.5625 C 12.578125 18.5625 13.007812 18.5625 13.4375 18.5625 C 13.808594 18.5625 14.175781 18.5625 14.546875 18.5625 C 14.769531 18.5625 14.988281 18.5625 15.207031 18.5625 C 15.414062 18.5625 15.621094 18.5625 15.828125 18.5625 C 15.90625 18.5625 15.980469 18.5625 16.058594 18.5625 C 16.414062 18.5625 16.765625 18.5625 17.121094 18.617188 C 17.050781 18.769531 16.964844 18.890625 16.863281 19.023438 C 15.925781 20.324219 15.691406 22 15.835938 23.554688 C 15.84375 23.613281 15.847656 23.671875 15.855469 23.734375 C 15.867188 23.855469 15.878906 23.976562 15.890625 24.09375 C 15.921875 24.453125 15.917969 24.691406 15.707031 24.988281 C 15.261719 25.691406 15.34375 26.542969 15.335938 27.339844 C 15.335938 27.425781 15.335938 27.511719 15.335938 27.601562 C 15.332031 27.917969 15.328125 28.238281 15.324219 28.554688 C 15.316406 29.269531 15.308594 29.980469 15.304688 30.714844 C 13.019531 30.714844 10.738281 30.714844 8.382812 30.714844 C 8.496094 30.382812 8.496094 30.382812 8.589844 30.234375 C 8.609375 30.199219 8.628906 30.164062 8.648438 30.128906 C 8.683594 30.078125 8.683594 30.078125 8.714844 30.023438 C 10.359375 27.1875 10.496094 23.867188 10.605469 20.691406 C 10.511719 20.691406 10.511719 20.691406 10.414062 20.691406 C 10.175781 20.695312 9.941406 20.695312 9.703125 20.695312 C 9.601562 20.699219 9.5 20.699219 9.398438 20.699219 C 9.25 20.699219 9.101562 20.699219 8.953125 20.699219 C 8.886719 20.703125 8.886719 20.703125 8.816406 20.703125 C 8.402344 20.703125 8.003906 20.671875 7.675781 20.394531 C 7.410156 20.042969 7.332031 19.746094 7.375 19.308594 C 7.460938 19.015625 7.628906 18.84375 7.878906 18.667969 C 8.308594 18.457031 9.019531 18.5625 9.496094 18.5625 Z M 11.3125 21.976562 C 11.265625 22.117188 11.25 22.226562 11.238281 22.371094 C 11.234375 22.421875 11.230469 22.472656 11.226562 22.523438 C 11.222656 22.578125 11.21875 22.628906 11.214844 22.683594 C 11.191406 23.011719 11.164062 23.335938 11.128906 23.660156 C 11.121094 23.707031 11.117188 23.753906 11.109375 23.800781 C 11.101562 23.886719 11.089844 23.976562 11.078125 24.0625 C 11.050781 24.316406 11.0625 24.46875 11.210938 24.691406 C 11.332031 24.78125 11.390625 24.792969 11.539062 24.785156 C 11.699219 24.730469 11.761719 24.667969 11.867188 24.542969 C 11.921875 24.40625 11.921875 24.40625 11.953125 24.257812 C 11.964844 24.207031 11.976562 24.15625 11.988281 24.105469 C 12.046875 23.8125 12.078125 23.523438 12.082031 23.222656 C 12.082031 23.1875 12.082031 23.152344 12.082031 23.113281 C 12.085938 23.042969 12.085938 22.96875 12.085938 22.894531 C 12.085938 22.816406 12.085938 22.742188 12.089844 22.667969 C 12.089844 22.558594 12.089844 22.449219 12.09375 22.339844 C 12.09375 22.273438 12.09375 22.207031 12.09375 22.140625 C 12.085938 21.972656 12.085938 21.972656 11.976562 21.855469 C 11.871094 21.765625 11.871094 21.765625 11.71875 21.753906 C 11.53125 21.785156 11.449219 21.84375 11.3125 21.976562 Z M 11.3125 21.976562 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.823529%,98.823529%,98.823529%);fill-opacity:1;" d="M 3.78125 37.808594 C 3.910156 37.808594 4.039062 37.808594 4.167969 37.804688 C 5.34375 37.796875 6.515625 37.789062 7.6875 37.785156 C 7.84375 37.785156 8 37.785156 8.15625 37.78125 C 8.195312 37.78125 8.234375 37.78125 8.277344 37.78125 C 8.90625 37.78125 9.539062 37.773438 10.167969 37.765625 C 10.816406 37.761719 11.46875 37.757812 12.117188 37.753906 C 12.515625 37.753906 12.917969 37.75 13.316406 37.746094 C 13.621094 37.742188 13.929688 37.742188 14.234375 37.742188 C 14.359375 37.742188 14.484375 37.742188 14.609375 37.738281 C 15.605469 37.71875 15.605469 37.71875 15.933594 37.992188 C 16.089844 38.144531 16.21875 38.308594 16.34375 38.484375 C 16.671875 38.886719 17.296875 39.089844 17.800781 39.148438 C 18.078125 39.171875 18.359375 39.171875 18.636719 39.175781 C 18.707031 39.175781 18.777344 39.175781 18.851562 39.175781 C 19 39.179688 19.152344 39.179688 19.304688 39.183594 C 19.546875 39.183594 19.789062 39.1875 20.027344 39.191406 C 20.582031 39.199219 21.136719 39.203125 21.691406 39.210938 C 22.199219 39.21875 22.707031 39.222656 23.214844 39.230469 C 23.453125 39.234375 23.695312 39.234375 23.933594 39.238281 C 24.082031 39.242188 24.230469 39.242188 24.378906 39.242188 C 24.480469 39.246094 24.582031 39.246094 24.683594 39.246094 C 24.777344 39.25 24.777344 39.25 24.867188 39.25 C 24.921875 39.25 24.972656 39.25 25.027344 39.25 C 25.152344 39.257812 25.152344 39.257812 25.253906 39.308594 C 25.277344 39.425781 25.292969 39.539062 25.308594 39.65625 C 25.316406 39.722656 25.328125 39.785156 25.335938 39.851562 C 25.339844 39.898438 25.347656 39.949219 25.355469 40 C 22.964844 40 20.574219 40 18.183594 40.003906 C 18.148438 40.003906 18.113281 40.003906 18.078125 40.003906 C 17.308594 40.003906 16.542969 40.003906 15.773438 40.003906 C 15.398438 40.003906 15.019531 40.003906 14.644531 40.003906 C 14.585938 40.003906 14.585938 40.003906 14.53125 40.003906 C 13.3125 40.003906 12.097656 40.003906 10.882812 40.003906 C 9.632812 40.003906 8.382812 40.003906 7.136719 40.003906 C 6.960938 40.003906 6.78125 40.003906 6.605469 40.003906 C 6.570312 40.003906 6.535156 40.003906 6.5 40.003906 C 5.941406 40.003906 5.382812 40.003906 4.824219 40.003906 C 4.261719 40.003906 3.699219 40.003906 3.136719 40.003906 C 2.832031 40.003906 2.53125 40.003906 2.226562 40.007812 C 1.945312 40.007812 1.667969 40.007812 1.390625 40.007812 C 1.289062 40.007812 1.1875 40.007812 1.085938 40.007812 C 0.949219 40.007812 0.8125 40.007812 0.675781 40.007812 C 0.636719 40.007812 0.597656 40.007812 0.554688 40.007812 C 0.363281 40.007812 0.1875 39.996094 0 39.949219 C 0.0117188 39.34375 0.214844 38.804688 0.65625 38.371094 C 1.050781 38.046875 1.445312 37.859375 1.964844 37.84375 C 2.003906 37.84375 2.042969 37.839844 2.082031 37.839844 C 2.648438 37.816406 3.214844 37.8125 3.78125 37.808594 Z M 3.78125 37.808594 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 22.984375 16.972656 C 23.039062 16.972656 23.039062 16.972656 23.09375 16.972656 C 24.839844 16.980469 26.28125 17.566406 27.519531 18.785156 C 28.546875 19.835938 29.074219 21.160156 29.121094 22.59375 C 29.121094 22.660156 29.125 22.722656 29.125 22.785156 C 29.144531 23.355469 29.144531 23.921875 29.140625 24.492188 C 28.117188 24.46875 28.117188 24.46875 27.070312 24.445312 C 27.066406 24.21875 27.058594 23.988281 27.050781 23.757812 C 27.011719 22.511719 26.894531 21.289062 25.96875 20.347656 C 25.070312 19.527344 24.105469 19.117188 22.875 19.144531 C 21.875 19.191406 21.039062 19.601562 20.355469 20.296875 C 20.316406 20.332031 20.277344 20.367188 20.242188 20.40625 C 19.5625 21.09375 19.308594 21.953125 19.265625 22.890625 C 19.265625 22.929688 19.261719 22.96875 19.261719 23.011719 C 19.253906 23.15625 19.246094 23.304688 19.238281 23.449219 C 19.222656 23.777344 19.207031 24.105469 19.191406 24.445312 C 18.507812 24.445312 17.824219 24.445312 17.121094 24.445312 C 16.804688 23.210938 16.886719 21.839844 17.324219 20.640625 C 17.34375 20.589844 17.359375 20.539062 17.378906 20.484375 C 17.910156 19.128906 19.101562 18.066406 20.429688 17.464844 C 20.8125 17.300781 21.210938 17.179688 21.617188 17.085938 C 21.65625 17.078125 21.695312 17.066406 21.738281 17.058594 C 22.148438 16.972656 22.5625 16.96875 22.984375 16.972656 Z M 22.984375 16.972656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.823529%,98.823529%,98.823529%);fill-opacity:1;" d="M 13.738281 -0.015625 C 13.804688 -0.015625 13.875 -0.015625 13.941406 -0.0195312 C 14.65625 -0.03125 14.65625 -0.03125 14.949219 0.199219 C 15.128906 0.546875 15.066406 1.078125 15.078125 1.460938 C 15.082031 1.523438 15.082031 1.585938 15.085938 1.652344 C 15.089844 1.808594 15.097656 1.96875 15.101562 2.125 C 15.140625 2.125 15.183594 2.121094 15.226562 2.121094 C 15.382812 2.121094 15.539062 2.121094 15.695312 2.121094 C 15.796875 2.121094 15.894531 2.121094 15.996094 2.117188 C 17.085938 2.117188 17.085938 2.117188 17.324219 2.273438 C 17.613281 2.6875 17.480469 3.457031 17.472656 3.949219 C 17.46875 4.03125 17.46875 4.117188 17.46875 4.203125 C 17.46875 4.328125 17.464844 4.453125 17.460938 4.574219 C 17.460938 4.613281 17.460938 4.652344 17.460938 4.691406 C 17.457031 4.882812 17.429688 4.980469 17.3125 5.132812 C 17.0625 5.3125 16.808594 5.292969 16.507812 5.300781 C 16.46875 5.300781 16.429688 5.300781 16.390625 5.300781 C 16.265625 5.304688 16.144531 5.308594 16.019531 5.3125 C 15.9375 5.3125 15.851562 5.316406 15.765625 5.316406 C 15.5625 5.324219 15.355469 5.328125 15.152344 5.332031 C 14.925781 5.777344 15.070312 6.320312 15.050781 6.816406 C 14.015625 6.816406 12.984375 6.816406 11.917969 6.816406 C 11.894531 6.179688 11.894531 6.179688 11.867188 5.53125 C 11.851562 5.480469 11.835938 5.433594 11.816406 5.382812 C 11.636719 5.308594 11.429688 5.324219 11.234375 5.324219 C 11.15625 5.320312 11.082031 5.320312 11.003906 5.320312 C 10.886719 5.316406 10.765625 5.316406 10.648438 5.3125 C 10.53125 5.3125 10.417969 5.308594 10.300781 5.308594 C 10.265625 5.308594 10.230469 5.308594 10.195312 5.308594 C 9.941406 5.300781 9.761719 5.261719 9.546875 5.136719 C 9.40625 4.890625 9.429688 4.609375 9.429688 4.335938 C 9.429688 4.289062 9.429688 4.242188 9.429688 4.191406 C 9.429688 4.089844 9.429688 3.988281 9.429688 3.886719 C 9.429688 3.730469 9.425781 3.578125 9.425781 3.421875 C 9.425781 3.324219 9.425781 3.226562 9.425781 3.125 C 9.425781 3.082031 9.425781 3.035156 9.425781 2.988281 C 9.425781 2.714844 9.445312 2.507812 9.597656 2.273438 C 9.847656 2.125 10.082031 2.101562 10.367188 2.101562 C 10.425781 2.097656 10.425781 2.097656 10.484375 2.097656 C 10.605469 2.09375 10.726562 2.09375 10.847656 2.09375 C 10.972656 2.089844 11.09375 2.089844 11.21875 2.085938 C 11.292969 2.085938 11.371094 2.085938 11.445312 2.082031 C 11.636719 2.082031 11.636719 2.082031 11.816406 2.023438 C 11.90625 1.636719 11.882812 1.222656 11.886719 0.824219 C 11.886719 0.765625 11.890625 0.707031 11.890625 0.648438 C 11.890625 0.597656 11.890625 0.542969 11.890625 0.492188 C 11.925781 0.3125 11.992188 0.226562 12.121094 0.0976562 C 12.605469 -0.0585938 13.230469 -0.0117188 13.738281 -0.015625 Z M 13.738281 -0.015625 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,96.862745%,96.862745%);fill-opacity:1;" d="M 5.089844 34.683594 C 5.203125 34.683594 5.316406 34.683594 5.425781 34.683594 C 5.726562 34.683594 6.027344 34.683594 6.332031 34.6875 C 6.644531 34.6875 6.960938 34.6875 7.277344 34.6875 C 7.808594 34.6875 8.335938 34.691406 8.867188 34.695312 C 9.410156 34.695312 9.957031 34.699219 10.5 34.699219 C 10.535156 34.699219 10.566406 34.699219 10.601562 34.699219 C 10.769531 34.699219 10.941406 34.699219 11.109375 34.699219 C 12.507812 34.703125 13.90625 34.710938 15.304688 34.714844 C 15.304688 34.765625 15.304688 34.816406 15.308594 34.867188 C 15.3125 35.054688 15.316406 35.242188 15.320312 35.429688 C 15.324219 35.511719 15.324219 35.589844 15.328125 35.671875 C 15.332031 35.789062 15.335938 35.90625 15.335938 36.023438 C 15.339844 36.078125 15.339844 36.078125 15.339844 36.128906 C 15.347656 36.386719 15.375 36.632812 15.402344 36.890625 C 11.105469 36.890625 6.804688 36.890625 2.375 36.890625 C 2.515625 36.054688 2.746094 35.523438 3.433594 35.011719 C 3.46875 34.984375 3.503906 34.960938 3.539062 34.933594 C 4.015625 34.625 4.539062 34.675781 5.089844 34.683594 Z M 5.089844 34.683594 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(98.039216%,98.039216%,98.039216%);fill-opacity:1;" d="M 9.953125 31.699219 C 10.140625 31.699219 10.332031 31.699219 10.519531 31.699219 C 10.875 31.699219 11.230469 31.699219 11.585938 31.699219 C 11.992188 31.699219 12.398438 31.699219 12.804688 31.703125 C 13.636719 31.703125 14.46875 31.703125 15.304688 31.703125 C 15.304688 32.386719 15.304688 33.074219 15.304688 33.777344 C 14.164062 33.777344 13.023438 33.78125 11.882812 33.78125 C 11.355469 33.78125 10.824219 33.78125 10.296875 33.78125 C 9.835938 33.78125 9.375 33.78125 8.914062 33.78125 C 8.667969 33.78125 8.425781 33.78125 8.179688 33.78125 C 7.949219 33.785156 7.71875 33.785156 7.488281 33.785156 C 7.40625 33.785156 7.320312 33.785156 7.238281 33.785156 C 7.121094 33.785156 7.007812 33.785156 6.890625 33.785156 C 6.792969 33.785156 6.792969 33.785156 6.695312 33.785156 C 6.515625 33.777344 6.339844 33.757812 6.160156 33.726562 C 6.273438 33.019531 6.648438 32.480469 7.171875 32 C 7.21875 31.957031 7.21875 31.957031 7.265625 31.910156 C 7.46875 31.75 7.691406 31.734375 7.945312 31.722656 C 7.984375 31.722656 8.023438 31.71875 8.0625 31.71875 C 8.691406 31.691406 9.324219 31.699219 9.953125 31.699219 Z M 9.953125 31.699219 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0.392157%,0.392157%,0.392157%);fill-opacity:1;" d="M 3.78125 37.808594 C 3.910156 37.808594 4.039062 37.808594 4.167969 37.804688 C 5.34375 37.796875 6.515625 37.789062 7.6875 37.785156 C 7.84375 37.785156 8 37.785156 8.15625 37.78125 C 8.195312 37.78125 8.234375 37.78125 8.277344 37.78125 C 8.90625 37.78125 9.539062 37.773438 10.167969 37.765625 C 10.816406 37.761719 11.46875 37.757812 12.117188 37.753906 C 12.515625 37.753906 12.917969 37.75 13.316406 37.746094 C 13.621094 37.742188 13.929688 37.742188 14.234375 37.742188 C 14.359375 37.742188 14.484375 37.742188 14.609375 37.738281 C 15.605469 37.71875 15.605469 37.71875 15.933594 37.992188 C 16.089844 38.144531 16.21875 38.308594 16.34375 38.484375 C 16.671875 38.886719 17.296875 39.089844 17.800781 39.148438 C 18.078125 39.171875 18.359375 39.171875 18.636719 39.175781 C 18.707031 39.175781 18.777344 39.175781 18.851562 39.175781 C 19 39.179688 19.152344 39.179688 19.304688 39.183594 C 19.546875 39.183594 19.789062 39.1875 20.027344 39.191406 C 20.582031 39.199219 21.136719 39.203125 21.691406 39.210938 C 22.199219 39.21875 22.707031 39.222656 23.214844 39.230469 C 23.453125 39.234375 23.695312 39.234375 23.933594 39.238281 C 24.082031 39.242188 24.230469 39.242188 24.378906 39.242188 C 24.480469 39.246094 24.582031 39.246094 24.683594 39.246094 C 24.777344 39.25 24.777344 39.25 24.867188 39.25 C 24.921875 39.25 24.972656 39.25 25.027344 39.25 C 25.152344 39.257812 25.152344 39.257812 25.253906 39.308594 C 25.277344 39.425781 25.292969 39.539062 25.308594 39.65625 C 25.316406 39.722656 25.328125 39.785156 25.335938 39.851562 C 25.339844 39.898438 25.347656 39.949219 25.355469 40 C 22.964844 40 20.574219 40 18.183594 40.003906 C 18.148438 40.003906 18.113281 40.003906 18.078125 40.003906 C 17.308594 40.003906 16.542969 40.003906 15.773438 40.003906 C 15.398438 40.003906 15.019531 40.003906 14.644531 40.003906 C 14.585938 40.003906 14.585938 40.003906 14.53125 40.003906 C 13.3125 40.003906 12.097656 40.003906 10.882812 40.003906 C 9.632812 40.003906 8.382812 40.003906 7.136719 40.003906 C 6.960938 40.003906 6.78125 40.003906 6.605469 40.003906 C 6.570312 40.003906 6.535156 40.003906 6.5 40.003906 C 5.941406 40.003906 5.382812 40.003906 4.824219 40.003906 C 4.261719 40.003906 3.699219 40.003906 3.136719 40.003906 C 2.832031 40.003906 2.53125 40.003906 2.226562 40.007812 C 1.945312 40.007812 1.667969 40.007812 1.390625 40.007812 C 1.289062 40.007812 1.1875 40.007812 1.085938 40.007812 C 0.949219 40.007812 0.8125 40.007812 0.675781 40.007812 C 0.636719 40.007812 0.597656 40.007812 0.554688 40.007812 C 0.363281 40.007812 0.1875 39.996094 0 39.949219 C 0.0117188 39.34375 0.214844 38.804688 0.65625 38.371094 C 1.050781 38.046875 1.445312 37.859375 1.964844 37.84375 C 2.003906 37.84375 2.042969 37.839844 2.082031 37.839844 C 2.648438 37.816406 3.214844 37.8125 3.78125 37.808594 Z M 0.808594 38.667969 C 0.578125 38.933594 0.304688 39.34375 0.304688 39.703125 C 0.460938 39.78125 0.628906 39.757812 0.800781 39.757812 C 0.863281 39.757812 0.863281 39.757812 0.925781 39.757812 C 1.066406 39.757812 1.207031 39.757812 1.351562 39.757812 C 1.453125 39.757812 1.554688 39.757812 1.65625 39.757812 C 1.933594 39.757812 2.214844 39.757812 2.496094 39.757812 C 2.796875 39.757812 3.097656 39.757812 3.398438 39.757812 C 3.921875 39.757812 4.445312 39.757812 4.96875 39.757812 C 5.519531 39.757812 6.066406 39.757812 6.617188 39.757812 C 6.648438 39.757812 6.683594 39.757812 6.71875 39.757812 C 6.894531 39.757812 7.066406 39.757812 7.238281 39.757812 C 8.464844 39.757812 9.691406 39.757812 10.921875 39.757812 C 12.113281 39.757812 13.304688 39.757812 14.496094 39.753906 C 14.550781 39.753906 14.550781 39.753906 14.609375 39.753906 C 14.976562 39.753906 15.347656 39.753906 15.714844 39.753906 C 16.464844 39.753906 17.21875 39.753906 17.96875 39.753906 C 18.019531 39.753906 18.019531 39.753906 18.074219 39.753906 C 20.382812 39.753906 22.691406 39.753906 25 39.753906 C 24.984375 39.671875 24.964844 39.589844 24.949219 39.507812 C 24.914062 39.507812 24.882812 39.503906 24.847656 39.503906 C 24.019531 39.5 23.195312 39.496094 22.371094 39.492188 C 21.96875 39.488281 21.570312 39.488281 21.171875 39.484375 C 20.820312 39.484375 20.472656 39.480469 20.125 39.480469 C 19.941406 39.476562 19.757812 39.476562 19.574219 39.476562 C 17.113281 39.46875 17.113281 39.46875 16.3125 38.863281 C 16.21875 38.765625 16.136719 38.664062 16.050781 38.5625 C 15.769531 38.234375 15.523438 38.035156 15.082031 37.984375 C 14.800781 37.972656 14.523438 37.976562 14.246094 37.984375 C 14.117188 37.984375 13.992188 37.984375 13.867188 37.984375 C 13.597656 37.984375 13.328125 37.984375 13.0625 37.988281 C 12.671875 37.996094 12.28125 37.996094 11.890625 37.996094 C 11.257812 38 10.621094 38.003906 9.988281 38.011719 C 9.375 38.019531 8.761719 38.023438 8.148438 38.027344 C 8.09375 38.027344 8.09375 38.027344 8.035156 38.027344 C 7.882812 38.027344 7.730469 38.027344 7.578125 38.03125 C 6.414062 38.035156 5.246094 38.042969 4.078125 38.054688 C 3.957031 38.054688 3.835938 38.054688 3.714844 38.058594 C 2.144531 37.996094 2.144531 37.996094 0.808594 38.667969 Z M 0.808594 38.667969 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(96.862745%,96.862745%,96.862745%);fill-opacity:1;" d="M 10.019531 16.09375 C 10.078125 16.09375 10.136719 16.089844 10.195312 16.089844 C 10.292969 16.089844 10.292969 16.089844 10.390625 16.089844 C 10.457031 16.089844 10.527344 16.089844 10.59375 16.089844 C 10.777344 16.089844 10.960938 16.089844 11.148438 16.089844 C 11.261719 16.089844 11.378906 16.089844 11.492188 16.089844 C 11.894531 16.089844 12.300781 16.089844 12.703125 16.089844 C 13.078125 16.089844 13.453125 16.089844 13.828125 16.089844 C 14.148438 16.085938 14.472656 16.085938 14.792969 16.085938 C 14.984375 16.085938 15.179688 16.085938 15.371094 16.085938 C 15.550781 16.085938 15.734375 16.085938 15.914062 16.085938 C 16.011719 16.085938 16.109375 16.085938 16.207031 16.085938 C 17.078125 16.089844 17.078125 16.089844 17.421875 16.28125 C 17.550781 16.425781 17.648438 16.578125 17.738281 16.75 C 17.753906 16.78125 17.769531 16.8125 17.789062 16.84375 C 17.882812 17.015625 17.945312 17.179688 17.984375 17.371094 C 17.992188 17.410156 18.003906 17.449219 18.011719 17.488281 C 18.019531 17.535156 18.019531 17.535156 18.03125 17.582031 C 17.191406 17.582031 16.347656 17.582031 15.507812 17.582031 C 15.117188 17.582031 14.726562 17.582031 14.335938 17.582031 C 12.503906 17.585938 10.671875 17.582031 8.839844 17.53125 C 8.90625 17.007812 9.128906 16.535156 9.5625 16.203125 C 9.722656 16.097656 9.824219 16.09375 10.019531 16.09375 Z M 10.019531 16.09375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 18.886719 25.472656 C 18.996094 25.472656 19.101562 25.472656 19.210938 25.472656 C 19.5 25.472656 19.789062 25.472656 20.078125 25.472656 C 20.261719 25.472656 20.441406 25.472656 20.625 25.472656 C 21.257812 25.472656 21.890625 25.472656 22.523438 25.472656 C 23.109375 25.472656 23.699219 25.472656 24.289062 25.472656 C 24.796875 25.46875 25.304688 25.46875 25.808594 25.46875 C 26.113281 25.46875 26.414062 25.46875 26.714844 25.46875 C 27 25.46875 27.285156 25.46875 27.570312 25.46875 C 27.671875 25.46875 27.777344 25.46875 27.882812 25.46875 C 29.28125 25.464844 29.28125 25.464844 29.597656 25.765625 C 30.046875 26.207031 30.003906 26.710938 30.007812 27.300781 C 30.007812 27.429688 30.007812 27.558594 30.007812 27.6875 C 30.007812 27.78125 30.007812 27.875 30.007812 27.96875 C 30.007812 28.21875 30.007812 28.472656 30.007812 28.722656 C 30.007812 28.882812 30.007812 29.039062 30.007812 29.199219 C 30.007812 29.75 30.007812 30.300781 30.007812 30.851562 C 30.007812 31.363281 30.011719 31.878906 30.011719 32.390625 C 30.011719 32.832031 30.011719 33.273438 30.011719 33.714844 C 30.011719 33.976562 30.011719 34.238281 30.011719 34.503906 C 30.011719 34.75 30.011719 35 30.011719 35.246094 C 30.011719 35.335938 30.011719 35.425781 30.011719 35.515625 C 30.019531 37.128906 30.019531 37.128906 29.53125 37.609375 C 28.871094 38.234375 27.820312 38.082031 26.964844 38.085938 C 26.867188 38.085938 26.765625 38.085938 26.667969 38.085938 C 26.347656 38.085938 26.023438 38.089844 25.703125 38.089844 C 25.644531 38.089844 25.589844 38.089844 25.535156 38.089844 C 25.015625 38.089844 24.496094 38.09375 23.972656 38.09375 C 23.3125 38.09375 22.648438 38.097656 21.988281 38.101562 C 21.519531 38.101562 21.050781 38.105469 20.582031 38.105469 C 20.304688 38.105469 20.027344 38.105469 19.746094 38.105469 C 19.484375 38.109375 19.222656 38.109375 18.960938 38.109375 C 18.867188 38.109375 18.769531 38.109375 18.675781 38.109375 C 18.015625 38.117188 17.511719 38.050781 17 37.59375 C 16.5 37.050781 16.472656 36.566406 16.480469 35.867188 C 16.480469 35.769531 16.480469 35.671875 16.480469 35.574219 C 16.480469 35.308594 16.480469 35.042969 16.484375 34.78125 C 16.484375 34.503906 16.484375 34.222656 16.484375 33.945312 C 16.484375 33.480469 16.488281 33.015625 16.488281 32.546875 C 16.492188 31.890625 16.496094 31.234375 16.496094 30.578125 C 16.496094 30.070312 16.496094 29.558594 16.5 29.046875 C 16.5 28.992188 16.5 28.9375 16.5 28.882812 C 16.5 28.566406 16.503906 28.253906 16.503906 27.9375 C 16.503906 27.84375 16.503906 27.75 16.503906 27.652344 C 16.511719 26.128906 16.511719 26.128906 16.855469 25.792969 C 17.378906 25.332031 18.226562 25.472656 18.886719 25.472656 Z M 17.019531 26.023438 C 16.621094 26.515625 16.757812 27.359375 16.757812 27.953125 C 16.753906 28.046875 16.753906 28.140625 16.753906 28.234375 C 16.753906 28.542969 16.75 28.847656 16.75 29.152344 C 16.75 29.207031 16.75 29.257812 16.75 29.3125 C 16.746094 29.804688 16.746094 30.300781 16.746094 30.792969 C 16.742188 31.425781 16.742188 32.054688 16.738281 32.683594 C 16.734375 33.125 16.734375 33.570312 16.730469 34.015625 C 16.730469 34.28125 16.730469 34.542969 16.730469 34.808594 C 16.726562 35.058594 16.726562 35.308594 16.726562 35.554688 C 16.726562 35.648438 16.726562 35.738281 16.726562 35.828125 C 16.71875 36.394531 16.757812 36.816406 17.121094 37.285156 C 17.261719 37.421875 17.402344 37.53125 17.574219 37.628906 C 17.605469 37.644531 17.632812 37.664062 17.660156 37.679688 C 17.914062 37.816406 18.109375 37.855469 18.398438 37.851562 C 18.4375 37.851562 18.476562 37.851562 18.519531 37.851562 C 18.652344 37.851562 18.785156 37.851562 18.917969 37.851562 C 19.011719 37.851562 19.109375 37.851562 19.207031 37.851562 C 19.464844 37.851562 19.726562 37.851562 19.984375 37.847656 C 20.257812 37.847656 20.53125 37.847656 20.800781 37.847656 C 21.261719 37.847656 21.71875 37.847656 22.175781 37.84375 C 22.761719 37.84375 23.347656 37.84375 23.933594 37.839844 C 24.441406 37.839844 24.945312 37.839844 25.453125 37.839844 C 25.558594 37.839844 25.667969 37.839844 25.777344 37.839844 C 26.085938 37.839844 26.394531 37.835938 26.703125 37.835938 C 26.796875 37.835938 26.886719 37.835938 26.980469 37.835938 C 28.230469 37.871094 28.230469 37.871094 29.339844 37.386719 C 29.878906 36.851562 29.761719 35.917969 29.757812 35.21875 C 29.761719 35.128906 29.761719 35.039062 29.761719 34.949219 C 29.761719 34.703125 29.761719 34.460938 29.757812 34.21875 C 29.757812 33.964844 29.757812 33.710938 29.757812 33.453125 C 29.757812 33.027344 29.757812 32.597656 29.757812 32.171875 C 29.757812 31.675781 29.757812 31.183594 29.757812 30.6875 C 29.757812 30.160156 29.757812 29.632812 29.757812 29.105469 C 29.757812 28.953125 29.757812 28.804688 29.757812 28.652344 C 29.753906 28.414062 29.753906 28.175781 29.753906 27.9375 C 29.753906 27.851562 29.753906 27.761719 29.753906 27.675781 C 29.800781 26.757812 29.800781 26.757812 29.394531 25.976562 C 29.027344 25.710938 28.578125 25.722656 28.140625 25.722656 C 28.097656 25.722656 28.054688 25.722656 28.011719 25.722656 C 27.867188 25.722656 27.722656 25.722656 27.582031 25.722656 C 27.476562 25.722656 27.375 25.722656 27.269531 25.722656 C 26.992188 25.722656 26.710938 25.722656 26.433594 25.722656 C 26.140625 25.722656 25.847656 25.722656 25.554688 25.722656 C 25.0625 25.722656 24.570312 25.722656 24.078125 25.722656 C 23.511719 25.722656 22.941406 25.722656 22.375 25.722656 C 21.886719 25.722656 21.398438 25.722656 20.910156 25.722656 C 20.621094 25.722656 20.328125 25.722656 20.035156 25.722656 C 19.761719 25.722656 19.488281 25.722656 19.214844 25.722656 C 19.113281 25.722656 19.015625 25.722656 18.914062 25.722656 C 17.898438 25.652344 17.898438 25.652344 17.019531 26.023438 Z M 17.019531 26.023438 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0.392157%,0.392157%,0.392157%);fill-opacity:1;" d="M 9.496094 18.5625 C 9.578125 18.5625 9.65625 18.5625 9.734375 18.5625 C 9.945312 18.5625 10.15625 18.5625 10.367188 18.5625 C 10.589844 18.5625 10.8125 18.5625 11.03125 18.5625 C 11.40625 18.5625 11.777344 18.5625 12.148438 18.5625 C 12.578125 18.5625 13.007812 18.5625 13.4375 18.5625 C 13.808594 18.5625 14.175781 18.5625 14.546875 18.5625 C 14.769531 18.5625 14.988281 18.5625 15.207031 18.5625 C 15.414062 18.5625 15.621094 18.5625 15.828125 18.5625 C 15.90625 18.5625 15.980469 18.5625 16.058594 18.5625 C 16.414062 18.5625 16.765625 18.5625 17.121094 18.617188 C 17.050781 18.769531 16.964844 18.890625 16.863281 19.023438 C 15.925781 20.324219 15.691406 22 15.835938 23.554688 C 15.84375 23.613281 15.847656 23.671875 15.855469 23.734375 C 15.867188 23.855469 15.878906 23.976562 15.890625 24.09375 C 15.921875 24.453125 15.917969 24.691406 15.707031 24.988281 C 15.261719 25.691406 15.34375 26.542969 15.335938 27.339844 C 15.335938 27.425781 15.335938 27.511719 15.335938 27.601562 C 15.332031 27.917969 15.328125 28.238281 15.324219 28.554688 C 15.316406 29.269531 15.308594 29.980469 15.304688 30.714844 C 13.019531 30.714844 10.738281 30.714844 8.382812 30.714844 C 8.496094 30.382812 8.496094 30.382812 8.589844 30.234375 C 8.609375 30.199219 8.628906 30.164062 8.648438 30.128906 C 8.683594 30.078125 8.683594 30.078125 8.714844 30.023438 C 10.359375 27.1875 10.496094 23.867188 10.605469 20.691406 C 10.511719 20.691406 10.511719 20.691406 10.414062 20.691406 C 10.175781 20.695312 9.941406 20.695312 9.703125 20.695312 C 9.601562 20.699219 9.5 20.699219 9.398438 20.699219 C 9.25 20.699219 9.101562 20.699219 8.953125 20.699219 C 8.886719 20.703125 8.886719 20.703125 8.816406 20.703125 C 8.402344 20.703125 8.003906 20.671875 7.675781 20.394531 C 7.410156 20.042969 7.332031 19.746094 7.375 19.308594 C 7.460938 19.015625 7.628906 18.84375 7.878906 18.667969 C 8.308594 18.457031 9.019531 18.5625 9.496094 18.5625 Z M 8.476562 18.832031 C 8.417969 18.832031 8.355469 18.835938 8.292969 18.839844 C 8.089844 18.871094 7.945312 18.933594 7.8125 19.09375 C 7.707031 19.277344 7.621094 19.4375 7.625 19.65625 C 7.730469 19.933594 7.855469 20.203125 8.132812 20.34375 C 8.46875 20.433594 8.800781 20.460938 9.148438 20.464844 C 9.21875 20.464844 9.21875 20.464844 9.289062 20.464844 C 9.433594 20.46875 9.578125 20.46875 9.726562 20.472656 C 9.871094 20.472656 10.019531 20.476562 10.167969 20.480469 C 10.257812 20.480469 10.351562 20.480469 10.441406 20.484375 C 10.75 20.488281 10.75 20.488281 10.808594 20.542969 C 10.8125 20.628906 10.816406 20.714844 10.816406 20.800781 C 10.816406 20.855469 10.816406 20.910156 10.816406 20.96875 C 10.816406 21.058594 10.816406 21.058594 10.8125 21.152344 C 10.8125 21.214844 10.8125 21.277344 10.8125 21.339844 C 10.796875 24.515625 10.371094 27.515625 8.890625 30.371094 C 8.871094 30.402344 8.855469 30.4375 8.839844 30.46875 C 10.886719 30.46875 12.9375 30.46875 15.050781 30.46875 C 15.066406 29.03125 15.066406 29.03125 15.078125 27.59375 C 15.082031 27.3125 15.082031 27.3125 15.082031 27.183594 C 15.085938 27.089844 15.085938 27 15.085938 26.910156 C 15.097656 25.5625 15.097656 25.5625 15.238281 25.199219 C 15.257812 25.15625 15.273438 25.109375 15.292969 25.0625 C 15.351562 24.945312 15.414062 24.855469 15.496094 24.753906 C 15.625 24.566406 15.609375 24.429688 15.589844 24.207031 C 15.582031 24.140625 15.578125 24.074219 15.570312 24.007812 C 15.566406 23.957031 15.566406 23.957031 15.5625 23.902344 C 15.445312 22.289062 15.511719 20.421875 16.476562 19.046875 C 16.574219 18.925781 16.574219 18.925781 16.566406 18.816406 C 15.578125 18.8125 14.589844 18.8125 13.601562 18.8125 C 13.144531 18.8125 12.683594 18.8125 12.226562 18.8125 C 11.824219 18.8125 11.425781 18.808594 11.027344 18.808594 C 10.8125 18.808594 10.601562 18.808594 10.390625 18.808594 C 10.191406 18.808594 9.992188 18.808594 9.792969 18.808594 C 9.71875 18.808594 9.644531 18.808594 9.574219 18.808594 C 9.207031 18.808594 8.84375 18.8125 8.476562 18.832031 Z M 8.476562 18.832031 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 22.984375 16.972656 C 23.039062 16.972656 23.039062 16.972656 23.09375 16.972656 C 24.839844 16.980469 26.28125 17.566406 27.519531 18.785156 C 28.546875 19.835938 29.074219 21.160156 29.121094 22.59375 C 29.121094 22.660156 29.125 22.722656 29.125 22.785156 C 29.144531 23.355469 29.144531 23.921875 29.140625 24.492188 C 28.117188 24.46875 28.117188 24.46875 27.070312 24.445312 C 27.066406 24.21875 27.058594 23.988281 27.050781 23.757812 C 27.011719 22.511719 26.894531 21.289062 25.96875 20.347656 C 25.070312 19.527344 24.105469 19.117188 22.875 19.144531 C 21.875 19.191406 21.039062 19.601562 20.355469 20.296875 C 20.316406 20.332031 20.277344 20.367188 20.242188 20.40625 C 19.5625 21.09375 19.308594 21.953125 19.265625 22.890625 C 19.265625 22.929688 19.261719 22.96875 19.261719 23.011719 C 19.253906 23.15625 19.246094 23.304688 19.238281 23.449219 C 19.222656 23.777344 19.207031 24.105469 19.191406 24.445312 C 18.507812 24.445312 17.824219 24.445312 17.121094 24.445312 C 16.804688 23.210938 16.886719 21.839844 17.324219 20.640625 C 17.34375 20.589844 17.359375 20.539062 17.378906 20.484375 C 17.910156 19.128906 19.101562 18.066406 20.429688 17.464844 C 20.8125 17.300781 21.210938 17.179688 21.617188 17.085938 C 21.65625 17.078125 21.695312 17.066406 21.738281 17.058594 C 22.148438 16.972656 22.5625 16.96875 22.984375 16.972656 Z M 19.191406 18.566406 C 19.148438 18.601562 19.105469 18.636719 19.0625 18.671875 C 17.984375 19.5625 17.363281 20.875 17.230469 22.238281 C 17.214844 22.464844 17.214844 22.695312 17.210938 22.925781 C 17.210938 22.972656 17.210938 23.019531 17.210938 23.066406 C 17.210938 23.460938 17.265625 23.796875 17.324219 24.199219 C 17.855469 24.199219 18.390625 24.199219 18.9375 24.199219 C 18.945312 24.066406 18.949219 23.933594 18.957031 23.800781 C 18.960938 23.671875 18.96875 23.542969 18.972656 23.414062 C 18.976562 23.324219 18.980469 23.234375 18.984375 23.148438 C 19.042969 21.789062 19.40625 20.757812 20.429688 19.808594 C 21.328125 19.007812 22.425781 18.863281 23.59375 18.90625 C 24.699219 18.96875 25.585938 19.566406 26.332031 20.320312 C 27.15625 21.269531 27.261719 22.34375 27.300781 23.539062 C 27.3125 23.867188 27.3125 23.867188 27.324219 24.199219 C 27.839844 24.199219 28.355469 24.199219 28.890625 24.199219 C 28.890625 23.726562 28.886719 23.253906 28.871094 22.785156 C 28.867188 22.695312 28.867188 22.695312 28.863281 22.601562 C 28.816406 21.085938 28.105469 19.691406 26.976562 18.652344 C 25.707031 17.539062 24.160156 17.167969 22.488281 17.226562 C 21.285156 17.296875 20.113281 17.828125 19.191406 18.566406 Z M 19.191406 18.566406 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.960784%,1.960784%,1.960784%);fill-opacity:1;" d="M 11.550781 7.59375 C 11.671875 7.59375 11.796875 7.59375 11.917969 7.59375 C 12.175781 7.59375 12.433594 7.59375 12.6875 7.59375 C 13.015625 7.59375 13.339844 7.597656 13.664062 7.597656 C 13.917969 7.597656 14.171875 7.597656 14.425781 7.597656 C 14.546875 7.597656 14.664062 7.597656 14.785156 7.597656 C 15.429688 7.597656 16.074219 7.605469 16.71875 7.625 C 16.808594 7.628906 16.808594 7.628906 16.894531 7.632812 C 17.371094 7.648438 17.835938 7.703125 18.304688 7.785156 C 18.382812 7.800781 18.460938 7.8125 18.539062 7.828125 C 20.550781 8.179688 20.550781 8.179688 21.011719 8.742188 C 21.136719 8.9375 21.125 9.132812 21.09375 9.355469 C 21.035156 9.574219 20.910156 9.710938 20.757812 9.875 C 20.703125 9.9375 20.703125 9.9375 20.648438 10 C 20.390625 10.28125 20.121094 10.550781 19.847656 10.816406 C 19.820312 10.84375 19.792969 10.867188 19.765625 10.894531 C 19.625 11.03125 19.488281 11.164062 19.347656 11.300781 C 19.019531 11.613281 18.71875 11.941406 18.433594 12.296875 C 18.410156 12.328125 18.382812 12.359375 18.359375 12.390625 C 17.742188 13.179688 17.332031 14.082031 17.171875 15.0625 C 16.839844 15.121094 16.515625 15.117188 16.179688 15.117188 C 16.082031 15.117188 16.082031 15.117188 15.984375 15.117188 C 15.8125 15.117188 15.636719 15.117188 15.464844 15.117188 C 15.28125 15.117188 15.097656 15.117188 14.914062 15.117188 C 14.605469 15.117188 14.300781 15.117188 13.992188 15.117188 C 13.636719 15.117188 13.285156 15.117188 12.929688 15.117188 C 12.625 15.117188 12.320312 15.117188 12.015625 15.117188 C 11.832031 15.117188 11.652344 15.117188 11.46875 15.117188 C 11.265625 15.117188 11.0625 15.117188 10.859375 15.117188 C 10.773438 15.117188 10.773438 15.117188 10.679688 15.117188 C 10.351562 15.117188 10.027344 15.101562 9.695312 15.0625 C 9.691406 15.015625 9.683594 14.972656 9.675781 14.925781 C 9.445312 13.671875 8.792969 12.65625 7.910156 11.738281 C 7.8125 11.636719 7.714844 11.53125 7.621094 11.425781 C 7.332031 11.109375 7.019531 10.8125 6.710938 10.515625 C 5.800781 9.648438 5.800781 9.648438 5.796875 9.167969 C 5.792969 9.113281 5.792969 9.058594 5.792969 9 C 5.808594 8.816406 5.839844 8.734375 5.960938 8.59375 C 6.074219 8.515625 6.175781 8.457031 6.296875 8.398438 C 6.332031 8.382812 6.367188 8.363281 6.402344 8.347656 C 7.949219 7.648438 9.878906 7.589844 11.550781 7.59375 Z M 9.039062 8 C 8.96875 8.011719 8.894531 8.019531 8.824219 8.03125 C 8.65625 8.058594 8.492188 8.085938 8.328125 8.117188 C 8.269531 8.128906 8.214844 8.136719 8.15625 8.148438 C 7.027344 8.328125 7.027344 8.328125 6.121094 8.914062 C 6.03125 9.09375 6.054688 9.191406 6.109375 9.382812 C 6.28125 9.691406 6.566406 9.933594 6.820312 10.175781 C 6.96875 10.316406 7.105469 10.457031 7.238281 10.609375 C 7.4375 10.835938 7.65625 11.042969 7.871094 11.25 C 8.914062 12.261719 9.683594 13.382812 9.949219 14.816406 C 12.25 14.816406 14.550781 14.816406 16.917969 14.816406 C 16.984375 14.539062 17.050781 14.261719 17.121094 13.976562 C 17.179688 13.816406 17.238281 13.667969 17.3125 13.515625 C 17.332031 13.480469 17.347656 13.441406 17.367188 13.402344 C 17.71875 12.675781 18.183594 12.097656 18.738281 11.507812 C 18.769531 11.472656 18.796875 11.4375 18.828125 11.402344 C 19.050781 11.160156 19.277344 10.925781 19.511719 10.699219 C 19.554688 10.660156 19.554688 10.660156 19.597656 10.617188 C 19.714844 10.503906 19.828125 10.394531 19.945312 10.285156 C 20.539062 9.773438 20.539062 9.773438 20.816406 9.097656 C 20.730469 8.863281 20.617188 8.75 20.386719 8.632812 C 20.058594 8.480469 19.734375 8.375 19.382812 8.292969 C 19.304688 8.273438 19.304688 8.273438 19.222656 8.253906 C 17.320312 7.8125 15.417969 7.839844 13.472656 7.839844 C 13.226562 7.839844 12.984375 7.839844 12.742188 7.839844 C 10.882812 7.820312 10.882812 7.820312 9.039062 8 Z M 9.039062 8 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 5.089844 34.683594 C 5.203125 34.683594 5.316406 34.683594 5.425781 34.683594 C 5.726562 34.683594 6.027344 34.683594 6.332031 34.6875 C 6.644531 34.6875 6.960938 34.6875 7.277344 34.6875 C 7.808594 34.6875 8.335938 34.691406 8.867188 34.695312 C 9.410156 34.695312 9.957031 34.699219 10.5 34.699219 C 10.535156 34.699219 10.566406 34.699219 10.601562 34.699219 C 10.769531 34.699219 10.941406 34.699219 11.109375 34.699219 C 12.507812 34.703125 13.90625 34.710938 15.304688 34.714844 C 15.304688 34.765625 15.304688 34.816406 15.308594 34.867188 C 15.3125 35.054688 15.316406 35.242188 15.320312 35.429688 C 15.324219 35.511719 15.324219 35.589844 15.328125 35.671875 C 15.332031 35.789062 15.335938 35.90625 15.335938 36.023438 C 15.339844 36.078125 15.339844 36.078125 15.339844 36.128906 C 15.347656 36.386719 15.375 36.632812 15.402344 36.890625 C 11.105469 36.890625 6.804688 36.890625 2.375 36.890625 C 2.515625 36.054688 2.746094 35.523438 3.433594 35.011719 C 3.46875 34.984375 3.503906 34.960938 3.539062 34.933594 C 4.015625 34.625 4.539062 34.675781 5.089844 34.683594 Z M 3.082031 35.753906 C 2.894531 36.050781 2.785156 36.296875 2.726562 36.640625 C 6.792969 36.640625 10.859375 36.640625 15.050781 36.640625 C 15.050781 36.089844 15.050781 35.535156 15.050781 34.964844 C 13.644531 34.953125 12.242188 34.949219 10.835938 34.945312 C 10.183594 34.941406 9.53125 34.941406 8.878906 34.9375 C 8.3125 34.933594 7.742188 34.929688 7.175781 34.929688 C 6.875 34.929688 6.574219 34.929688 6.273438 34.925781 C 5.988281 34.925781 5.707031 34.921875 5.421875 34.925781 C 5.316406 34.921875 5.214844 34.921875 5.109375 34.921875 C 4.265625 34.910156 3.625 35.058594 3.082031 35.753906 Z M 3.082031 35.753906 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0.392157%,0.392157%,0.392157%);fill-opacity:1;" d="M 13.738281 -0.015625 C 13.804688 -0.015625 13.875 -0.015625 13.941406 -0.0195312 C 14.65625 -0.03125 14.65625 -0.03125 14.949219 0.199219 C 15.128906 0.546875 15.066406 1.078125 15.078125 1.460938 C 15.082031 1.523438 15.082031 1.585938 15.085938 1.652344 C 15.089844 1.808594 15.097656 1.96875 15.101562 2.125 C 15.140625 2.125 15.183594 2.121094 15.226562 2.121094 C 15.382812 2.121094 15.539062 2.121094 15.695312 2.121094 C 15.796875 2.121094 15.894531 2.121094 15.996094 2.117188 C 17.085938 2.117188 17.085938 2.117188 17.324219 2.273438 C 17.613281 2.6875 17.480469 3.457031 17.472656 3.949219 C 17.46875 4.03125 17.46875 4.117188 17.46875 4.203125 C 17.46875 4.328125 17.464844 4.453125 17.460938 4.574219 C 17.460938 4.613281 17.460938 4.652344 17.460938 4.691406 C 17.457031 4.882812 17.429688 4.980469 17.3125 5.132812 C 17.0625 5.3125 16.808594 5.292969 16.507812 5.300781 C 16.46875 5.300781 16.429688 5.300781 16.390625 5.300781 C 16.265625 5.304688 16.144531 5.308594 16.019531 5.3125 C 15.9375 5.3125 15.851562 5.316406 15.765625 5.316406 C 15.5625 5.324219 15.355469 5.328125 15.152344 5.332031 C 14.925781 5.777344 15.070312 6.320312 15.050781 6.816406 C 14.015625 6.816406 12.984375 6.816406 11.917969 6.816406 C 11.894531 6.179688 11.894531 6.179688 11.867188 5.53125 C 11.851562 5.480469 11.835938 5.433594 11.816406 5.382812 C 11.636719 5.308594 11.429688 5.324219 11.234375 5.324219 C 11.15625 5.320312 11.082031 5.320312 11.003906 5.320312 C 10.886719 5.316406 10.765625 5.316406 10.648438 5.3125 C 10.53125 5.3125 10.417969 5.308594 10.300781 5.308594 C 10.265625 5.308594 10.230469 5.308594 10.195312 5.308594 C 9.941406 5.300781 9.761719 5.261719 9.546875 5.136719 C 9.40625 4.890625 9.429688 4.609375 9.429688 4.335938 C 9.429688 4.289062 9.429688 4.242188 9.429688 4.191406 C 9.429688 4.089844 9.429688 3.988281 9.429688 3.886719 C 9.429688 3.730469 9.425781 3.578125 9.425781 3.421875 C 9.425781 3.324219 9.425781 3.226562 9.425781 3.125 C 9.425781 3.082031 9.425781 3.035156 9.425781 2.988281 C 9.425781 2.714844 9.445312 2.507812 9.597656 2.273438 C 9.847656 2.125 10.082031 2.101562 10.367188 2.101562 C 10.425781 2.097656 10.425781 2.097656 10.484375 2.097656 C 10.605469 2.09375 10.726562 2.09375 10.847656 2.09375 C 10.972656 2.089844 11.09375 2.089844 11.21875 2.085938 C 11.292969 2.085938 11.371094 2.085938 11.445312 2.082031 C 11.636719 2.082031 11.636719 2.082031 11.816406 2.023438 C 11.90625 1.636719 11.882812 1.222656 11.886719 0.824219 C 11.886719 0.765625 11.890625 0.707031 11.890625 0.648438 C 11.890625 0.597656 11.890625 0.542969 11.890625 0.492188 C 11.925781 0.3125 11.992188 0.226562 12.121094 0.0976562 C 12.605469 -0.0585938 13.230469 -0.0117188 13.738281 -0.015625 Z M 13.054688 0.25 C 12.617188 0.246094 12.617188 0.246094 12.222656 0.394531 C 12.164062 0.566406 12.164062 0.707031 12.160156 0.886719 C 12.15625 0.953125 12.15625 1.023438 12.152344 1.089844 C 12.152344 1.199219 12.148438 1.304688 12.148438 1.414062 C 12.144531 1.515625 12.144531 1.621094 12.140625 1.726562 C 12.136719 1.816406 12.136719 1.816406 12.136719 1.914062 C 12.121094 2.0625 12.105469 2.148438 12.019531 2.273438 C 11.867188 2.347656 11.703125 2.332031 11.535156 2.332031 C 11.457031 2.335938 11.378906 2.335938 11.300781 2.339844 C 11.175781 2.339844 11.050781 2.34375 10.929688 2.34375 C 10.808594 2.347656 10.6875 2.347656 10.570312 2.351562 C 10.53125 2.351562 10.496094 2.351562 10.457031 2.351562 C 10.222656 2.359375 10.015625 2.378906 9.796875 2.46875 C 9.671875 2.695312 9.683594 2.941406 9.683594 3.195312 C 9.683594 3.234375 9.683594 3.277344 9.683594 3.316406 C 9.683594 3.402344 9.683594 3.488281 9.683594 3.574219 C 9.683594 3.703125 9.683594 3.832031 9.683594 3.964844 C 9.683594 4.046875 9.683594 4.128906 9.683594 4.214844 C 9.683594 4.25 9.683594 4.289062 9.683594 4.328125 C 9.683594 4.546875 9.691406 4.742188 9.796875 4.9375 C 10.019531 5.050781 10.25 5.050781 10.496094 5.054688 C 10.535156 5.054688 10.570312 5.054688 10.609375 5.054688 C 10.765625 5.058594 10.925781 5.0625 11.082031 5.0625 C 11.199219 5.066406 11.3125 5.066406 11.429688 5.070312 C 11.464844 5.070312 11.5 5.070312 11.535156 5.070312 C 11.734375 5.074219 11.894531 5.089844 12.070312 5.183594 C 12.21875 5.625 12.152344 6.105469 12.171875 6.566406 C 13.039062 6.566406 13.90625 6.566406 14.796875 6.566406 C 14.8125 6.117188 14.8125 6.117188 14.820312 5.667969 C 14.824219 5.609375 14.824219 5.554688 14.828125 5.496094 C 14.828125 5.410156 14.828125 5.410156 14.832031 5.324219 C 14.847656 5.183594 14.847656 5.183594 14.949219 5.085938 C 15.082031 5.074219 15.210938 5.070312 15.34375 5.070312 C 15.425781 5.070312 15.507812 5.070312 15.585938 5.066406 C 15.714844 5.066406 15.84375 5.066406 15.96875 5.0625 C 16.09375 5.0625 16.214844 5.0625 16.339844 5.058594 C 16.375 5.058594 16.414062 5.058594 16.453125 5.058594 C 16.710938 5.054688 16.894531 5.007812 17.121094 4.890625 C 17.179688 4.777344 17.179688 4.710938 17.179688 4.585938 C 17.179688 4.523438 17.179688 4.523438 17.179688 4.457031 C 17.179688 4.414062 17.179688 4.367188 17.179688 4.320312 C 17.179688 4.273438 17.179688 4.226562 17.179688 4.179688 C 17.179688 4.082031 17.179688 3.980469 17.179688 3.882812 C 17.179688 3.730469 17.179688 3.582031 17.179688 3.429688 C 17.179688 3.332031 17.179688 3.238281 17.179688 3.140625 C 17.179688 3.074219 17.179688 3.074219 17.179688 3.003906 C 17.179688 2.960938 17.179688 2.921875 17.179688 2.875 C 17.179688 2.839844 17.179688 2.800781 17.179688 2.765625 C 17.175781 2.65625 17.175781 2.65625 17.121094 2.519531 C 16.695312 2.253906 16.007812 2.355469 15.523438 2.34375 C 15.421875 2.339844 15.320312 2.335938 15.21875 2.335938 C 15.15625 2.332031 15.097656 2.332031 15.035156 2.332031 C 14.898438 2.320312 14.898438 2.320312 14.847656 2.273438 C 14.839844 2.179688 14.835938 2.085938 14.835938 1.992188 C 14.832031 1.90625 14.832031 1.90625 14.828125 1.816406 C 14.828125 1.757812 14.824219 1.695312 14.824219 1.632812 C 14.816406 1.457031 14.8125 1.277344 14.804688 1.101562 C 14.800781 1 14.796875 0.894531 14.796875 0.792969 C 14.792969 0.667969 14.785156 0.5625 14.746094 0.445312 C 14.472656 0.199219 14.171875 0.222656 13.8125 0.230469 C 13.734375 0.234375 13.734375 0.234375 13.652344 0.234375 C 13.453125 0.238281 13.253906 0.246094 13.054688 0.25 Z M 13.054688 0.25 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.960784%,1.960784%,1.960784%);fill-opacity:1;" d="M 24.304688 29.171875 C 24.664062 29.457031 24.960938 29.816406 25.050781 30.273438 C 25.085938 30.707031 25.078125 31.121094 24.847656 31.507812 C 24.765625 31.582031 24.679688 31.660156 24.597656 31.734375 C 24.472656 31.851562 24.472656 31.851562 24.394531 32 C 24.402344 32.253906 24.472656 32.476562 24.554688 32.71875 C 24.613281 32.890625 24.660156 33.0625 24.710938 33.234375 C 24.757812 33.410156 24.8125 33.582031 24.863281 33.757812 C 24.914062 33.929688 24.964844 34.101562 25.015625 34.273438 C 25.039062 34.351562 25.039062 34.351562 25.0625 34.433594 C 25.074219 34.476562 25.089844 34.523438 25.101562 34.566406 C 25.109375 34.601562 25.121094 34.636719 25.132812 34.671875 C 25.167969 34.839844 25.160156 34.992188 25.152344 35.160156 C 24.886719 35.417969 24.222656 35.316406 23.871094 35.320312 C 23.839844 35.320312 23.804688 35.320312 23.769531 35.320312 C 23.589844 35.320312 23.410156 35.320312 23.230469 35.320312 C 23.046875 35.320312 22.863281 35.320312 22.679688 35.324219 C 22.535156 35.324219 22.394531 35.324219 22.25 35.324219 C 22.148438 35.324219 22.046875 35.324219 21.949219 35.328125 C 21.886719 35.328125 21.824219 35.328125 21.761719 35.328125 C 21.707031 35.328125 21.652344 35.328125 21.597656 35.328125 C 21.464844 35.308594 21.464844 35.308594 21.371094 35.238281 C 21.246094 35.070312 21.292969 34.863281 21.3125 34.667969 C 21.433594 34.027344 21.636719 33.402344 21.828125 32.777344 C 21.882812 32.59375 21.9375 32.40625 21.992188 32.222656 C 22.007812 32.167969 22.023438 32.117188 22.039062 32.058594 C 22.050781 32.023438 22.058594 31.988281 22.070312 31.949219 C 22.019531 31.933594 21.972656 31.917969 21.917969 31.902344 C 21.832031 31.8125 21.832031 31.8125 21.742188 31.699219 C 21.699219 31.644531 21.699219 31.644531 21.652344 31.589844 C 21.449219 31.277344 21.386719 30.988281 21.394531 30.621094 C 21.394531 30.582031 21.394531 30.542969 21.398438 30.5 C 21.414062 29.929688 21.59375 29.632812 22.019531 29.234375 C 22.605469 28.710938 23.675781 28.738281 24.304688 29.171875 Z M 21.949219 29.722656 C 21.707031 30.078125 21.617188 30.4375 21.667969 30.863281 C 21.753906 31.238281 21.949219 31.464844 22.234375 31.722656 C 22.359375 31.902344 22.3125 32.042969 22.273438 32.246094 C 22.222656 32.445312 22.167969 32.644531 22.113281 32.839844 C 22.078125 32.957031 22.046875 33.070312 22.015625 33.183594 C 21.964844 33.363281 21.914062 33.542969 21.859375 33.722656 C 21.8125 33.898438 21.761719 34.074219 21.714844 34.246094 C 21.699219 34.300781 21.683594 34.355469 21.667969 34.410156 C 21.652344 34.460938 21.636719 34.511719 21.625 34.5625 C 21.613281 34.605469 21.597656 34.652344 21.585938 34.695312 C 21.566406 34.820312 21.574219 34.894531 21.617188 35.011719 C 21.796875 35.019531 21.972656 35.027344 22.152344 35.035156 C 22.203125 35.039062 22.25 35.042969 22.300781 35.042969 C 22.949219 35.074219 23.589844 35.0625 24.234375 35.035156 C 24.332031 35.035156 24.332031 35.035156 24.429688 35.03125 C 24.585938 35.023438 24.742188 35.019531 24.898438 35.011719 C 24.789062 34.570312 24.671875 34.128906 24.542969 33.6875 C 24.53125 33.644531 24.519531 33.597656 24.503906 33.550781 C 24.449219 33.359375 24.394531 33.171875 24.339844 32.980469 C 24.296875 32.839844 24.257812 32.699219 24.214844 32.558594 C 24.199219 32.496094 24.199219 32.496094 24.179688 32.429688 C 24.0625 32.027344 24.0625 32.027344 24.089844 31.851562 C 24.160156 31.792969 24.234375 31.738281 24.304688 31.683594 C 24.542969 31.472656 24.734375 31.136719 24.757812 30.824219 C 24.773438 30.292969 24.660156 29.960938 24.289062 29.570312 C 23.953125 29.265625 23.648438 29.175781 23.199219 29.167969 C 23.160156 29.167969 23.117188 29.167969 23.078125 29.164062 C 22.625 29.160156 22.226562 29.363281 21.949219 29.722656 Z M 21.949219 29.722656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 9.953125 31.699219 C 10.140625 31.699219 10.332031 31.699219 10.519531 31.699219 C 10.875 31.699219 11.230469 31.699219 11.585938 31.699219 C 11.992188 31.699219 12.398438 31.699219 12.804688 31.703125 C 13.636719 31.703125 14.46875 31.703125 15.304688 31.703125 C 15.304688 32.386719 15.304688 33.074219 15.304688 33.777344 C 14.164062 33.777344 13.023438 33.78125 11.882812 33.78125 C 11.355469 33.78125 10.824219 33.78125 10.296875 33.78125 C 9.835938 33.78125 9.375 33.78125 8.914062 33.78125 C 8.667969 33.78125 8.425781 33.78125 8.179688 33.78125 C 7.949219 33.785156 7.71875 33.785156 7.488281 33.785156 C 7.40625 33.785156 7.320312 33.785156 7.238281 33.785156 C 7.121094 33.785156 7.007812 33.785156 6.890625 33.785156 C 6.792969 33.785156 6.792969 33.785156 6.695312 33.785156 C 6.515625 33.777344 6.339844 33.757812 6.160156 33.726562 C 6.273438 33.019531 6.648438 32.480469 7.171875 32 C 7.21875 31.957031 7.21875 31.957031 7.265625 31.910156 C 7.46875 31.75 7.691406 31.734375 7.945312 31.722656 C 7.984375 31.722656 8.023438 31.71875 8.0625 31.71875 C 8.691406 31.691406 9.324219 31.699219 9.953125 31.699219 Z M 8.105469 31.964844 C 8.050781 31.96875 8.050781 31.96875 7.996094 31.96875 C 7.671875 31.988281 7.488281 32.117188 7.273438 32.34375 C 7.242188 32.371094 7.210938 32.398438 7.179688 32.421875 C 6.894531 32.667969 6.71875 32.996094 6.566406 33.332031 C 6.566406 33.382812 6.566406 33.429688 6.566406 33.480469 C 6.710938 33.550781 6.835938 33.535156 6.996094 33.535156 C 7.046875 33.535156 7.046875 33.535156 7.101562 33.535156 C 7.214844 33.535156 7.332031 33.535156 7.449219 33.535156 C 7.53125 33.535156 7.613281 33.535156 7.695312 33.535156 C 7.921875 33.535156 8.144531 33.535156 8.371094 33.535156 C 8.605469 33.535156 8.839844 33.535156 9.074219 33.535156 C 9.519531 33.535156 9.964844 33.535156 10.40625 33.535156 C 10.914062 33.535156 11.421875 33.535156 11.925781 33.535156 C 12.96875 33.53125 14.007812 33.53125 15.050781 33.53125 C 15.050781 33.007812 15.050781 32.488281 15.050781 31.949219 C 14.230469 31.949219 13.410156 31.949219 12.589844 31.949219 C 12.207031 31.949219 11.828125 31.949219 11.445312 31.945312 C 11.113281 31.945312 10.78125 31.945312 10.449219 31.945312 C 10.273438 31.945312 10.097656 31.945312 9.921875 31.945312 C 9.011719 31.941406 9.011719 31.941406 8.105469 31.964844 Z M 8.105469 31.964844 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 10.019531 16.09375 C 10.078125 16.09375 10.136719 16.089844 10.195312 16.089844 C 10.292969 16.089844 10.292969 16.089844 10.390625 16.089844 C 10.457031 16.089844 10.527344 16.089844 10.59375 16.089844 C 10.777344 16.089844 10.960938 16.089844 11.148438 16.089844 C 11.261719 16.089844 11.378906 16.089844 11.492188 16.089844 C 11.894531 16.089844 12.300781 16.089844 12.703125 16.089844 C 13.078125 16.089844 13.453125 16.089844 13.828125 16.089844 C 14.148438 16.085938 14.472656 16.085938 14.792969 16.085938 C 14.984375 16.085938 15.179688 16.085938 15.371094 16.085938 C 15.550781 16.085938 15.734375 16.085938 15.914062 16.085938 C 16.011719 16.085938 16.109375 16.085938 16.207031 16.085938 C 17.078125 16.089844 17.078125 16.089844 17.421875 16.28125 C 17.550781 16.425781 17.648438 16.578125 17.738281 16.75 C 17.753906 16.78125 17.769531 16.8125 17.789062 16.84375 C 17.882812 17.015625 17.945312 17.179688 17.984375 17.371094 C 17.992188 17.410156 18.003906 17.449219 18.011719 17.488281 C 18.019531 17.535156 18.019531 17.535156 18.03125 17.582031 C 17.191406 17.582031 16.347656 17.582031 15.507812 17.582031 C 15.117188 17.582031 14.726562 17.582031 14.335938 17.582031 C 12.503906 17.585938 10.671875 17.582031 8.839844 17.53125 C 8.90625 17.007812 9.128906 16.535156 9.5625 16.203125 C 9.722656 16.097656 9.824219 16.09375 10.019531 16.09375 Z M 9.34375 16.898438 C 9.316406 16.96875 9.316406 16.96875 9.289062 17.035156 C 9.269531 17.082031 9.25 17.128906 9.230469 17.179688 C 9.21875 17.214844 9.207031 17.25 9.191406 17.285156 C 10.472656 17.320312 11.753906 17.339844 13.035156 17.339844 C 13.066406 17.339844 13.101562 17.339844 13.136719 17.339844 C 13.546875 17.339844 13.960938 17.335938 14.371094 17.335938 C 14.730469 17.335938 15.085938 17.335938 15.441406 17.335938 C 16.167969 17.335938 16.898438 17.335938 17.625 17.332031 C 17.523438 16.972656 17.402344 16.660156 17.074219 16.445312 C 16.699219 16.324219 16.3125 16.335938 15.921875 16.332031 C 15.855469 16.332031 15.792969 16.332031 15.726562 16.332031 C 15.132812 16.324219 14.542969 16.324219 13.953125 16.320312 C 13.515625 16.320312 13.078125 16.316406 12.644531 16.3125 C 12.335938 16.308594 12.027344 16.308594 11.722656 16.304688 C 11.539062 16.304688 11.355469 16.304688 11.171875 16.300781 C 10.964844 16.300781 10.761719 16.300781 10.558594 16.300781 C 10.496094 16.296875 10.4375 16.296875 10.375 16.296875 C 9.875 16.300781 9.605469 16.488281 9.34375 16.898438 Z M 9.34375 16.898438 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.960784%,1.960784%,1.960784%);fill-opacity:1;" d="M 11.96875 21.480469 C 12.144531 21.582031 12.285156 21.699219 12.375 21.875 C 12.390625 22.136719 12.386719 22.398438 12.390625 22.65625 C 12.390625 22.695312 12.390625 22.734375 12.390625 22.773438 C 12.390625 24.417969 12.390625 24.417969 11.917969 24.953125 C 11.6875 25.082031 11.472656 25.085938 11.210938 25.035156 C 11.007812 24.925781 10.882812 24.808594 10.808594 24.59375 C 10.78125 24.183594 10.828125 23.78125 10.878906 23.375 C 10.925781 23.03125 10.964844 22.691406 10.96875 22.34375 C 10.980469 21.859375 10.980469 21.859375 11.183594 21.65625 C 11.429688 21.464844 11.660156 21.433594 11.96875 21.480469 Z M 11.3125 21.976562 C 11.265625 22.117188 11.25 22.226562 11.238281 22.371094 C 11.234375 22.421875 11.230469 22.472656 11.226562 22.523438 C 11.222656 22.578125 11.21875 22.628906 11.214844 22.683594 C 11.191406 23.011719 11.164062 23.335938 11.128906 23.660156 C 11.121094 23.707031 11.117188 23.753906 11.109375 23.800781 C 11.101562 23.886719 11.089844 23.976562 11.078125 24.0625 C 11.050781 24.316406 11.0625 24.46875 11.210938 24.691406 C 11.332031 24.78125 11.390625 24.792969 11.539062 24.785156 C 11.699219 24.730469 11.761719 24.667969 11.867188 24.542969 C 11.921875 24.40625 11.921875 24.40625 11.953125 24.257812 C 11.964844 24.207031 11.976562 24.15625 11.988281 24.105469 C 12.046875 23.8125 12.078125 23.523438 12.082031 23.222656 C 12.082031 23.1875 12.082031 23.152344 12.082031 23.113281 C 12.085938 23.042969 12.085938 22.96875 12.085938 22.894531 C 12.085938 22.816406 12.085938 22.742188 12.089844 22.667969 C 12.089844 22.558594 12.089844 22.449219 12.09375 22.339844 C 12.09375 22.273438 12.09375 22.207031 12.09375 22.140625 C 12.085938 21.972656 12.085938 21.972656 11.976562 21.855469 C 11.871094 21.765625 11.871094 21.765625 11.71875 21.753906 C 11.53125 21.785156 11.449219 21.84375 11.3125 21.976562 Z M 11.3125 21.976562 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.960784%,1.960784%,1.960784%);fill-opacity:1;" d="M 18.960938 26.574219 C 19.265625 26.792969 19.265625 26.792969 19.34375 26.964844 C 19.386719 27.289062 19.402344 27.625 19.191406 27.902344 C 18.929688 28.132812 18.769531 28.164062 18.421875 28.160156 C 18.171875 28.140625 18.03125 28.054688 17.863281 27.875 C 17.667969 27.59375 17.679688 27.246094 17.726562 26.914062 C 18.003906 26.472656 18.484375 26.421875 18.960938 26.574219 Z M 18.082031 26.964844 C 17.964844 27.101562 17.980469 27.171875 17.984375 27.355469 C 18.015625 27.550781 18.089844 27.660156 18.230469 27.800781 C 18.394531 27.882812 18.5625 27.875 18.738281 27.851562 C 18.910156 27.75 19.035156 27.648438 19.089844 27.457031 C 19.089844 27.199219 19.085938 27.109375 18.90625 26.917969 C 18.582031 26.722656 18.375 26.714844 18.082031 26.964844 Z M 18.082031 26.964844 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.960784%,1.960784%,1.960784%);fill-opacity:1;" d="M 18.9375 35.210938 C 19.164062 35.316406 19.300781 35.476562 19.394531 35.703125 C 19.441406 35.964844 19.453125 36.199219 19.308594 36.433594 C 18.992188 36.78125 18.992188 36.78125 18.769531 36.800781 C 18.390625 36.804688 18.1875 36.761719 17.886719 36.53125 C 17.714844 36.316406 17.742188 36.042969 17.75 35.78125 C 17.789062 35.539062 17.878906 35.402344 18.082031 35.257812 C 18.328125 35.136719 18.667969 35.179688 18.9375 35.210938 Z M 18.132812 35.605469 C 18.015625 35.753906 18.007812 35.914062 18.011719 36.101562 C 18.042969 36.265625 18.152344 36.34375 18.28125 36.445312 C 18.445312 36.523438 18.613281 36.523438 18.789062 36.492188 C 18.9375 36.378906 18.9375 36.378906 19.039062 36.246094 C 19.058594 36.230469 19.074219 36.214844 19.089844 36.199219 C 19.121094 35.945312 19.121094 35.945312 19.039062 35.710938 C 18.949219 35.605469 18.863281 35.519531 18.738281 35.457031 C 18.488281 35.4375 18.332031 35.449219 18.132812 35.605469 Z M 18.132812 35.605469 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.568627%,1.568627%,1.568627%);fill-opacity:1;" d="M 28.183594 26.519531 C 28.359375 26.605469 28.359375 26.605469 28.484375 26.714844 C 28.519531 26.742188 28.554688 26.769531 28.589844 26.796875 C 28.722656 26.957031 28.722656 27.101562 28.722656 27.296875 C 28.722656 27.347656 28.722656 27.347656 28.722656 27.402344 C 28.710938 27.6875 28.632812 27.84375 28.425781 28.035156 C 28.191406 28.195312 27.898438 28.1875 27.625 28.148438 C 27.398438 28.039062 27.210938 27.894531 27.121094 27.65625 C 27.089844 27.382812 27.054688 27.058594 27.171875 26.800781 C 27.4375 26.480469 27.785156 26.476562 28.183594 26.519531 Z M 27.433594 27 C 27.347656 27.160156 27.355469 27.277344 27.375 27.457031 C 27.457031 27.636719 27.546875 27.761719 27.726562 27.851562 C 27.933594 27.878906 27.933594 27.878906 28.132812 27.851562 C 28.265625 27.746094 28.355469 27.660156 28.433594 27.507812 C 28.46875 27.214844 28.46875 27.214844 28.320312 26.96875 C 27.992188 26.71875 27.746094 26.703125 27.433594 27 Z M 27.433594 27 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.568627%,1.568627%,1.568627%);fill-opacity:1;" d="M 28.28125 35.210938 C 28.472656 35.304688 28.59375 35.421875 28.6875 35.605469 C 28.695312 35.722656 28.699219 35.84375 28.703125 35.964844 C 28.703125 36.027344 28.707031 36.09375 28.707031 36.15625 C 28.683594 36.375 28.625 36.476562 28.484375 36.640625 C 28.234375 36.816406 27.976562 36.824219 27.675781 36.789062 C 27.464844 36.710938 27.320312 36.613281 27.171875 36.445312 C 27.078125 36.171875 27.085938 35.886719 27.121094 35.605469 C 27.367188 35.140625 27.804688 35.15625 28.28125 35.210938 Z M 27.476562 35.605469 C 27.378906 35.726562 27.371094 35.8125 27.351562 35.96875 C 27.382812 36.207031 27.457031 36.277344 27.625 36.445312 C 27.789062 36.523438 27.957031 36.519531 28.132812 36.492188 C 28.273438 36.40625 28.359375 36.34375 28.433594 36.199219 C 28.464844 35.945312 28.464844 35.945312 28.382812 35.710938 C 28.292969 35.605469 28.207031 35.519531 28.082031 35.457031 C 27.835938 35.433594 27.683594 35.476562 27.476562 35.605469 Z M 27.476562 35.605469 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(67.45098%,67.45098%,67.45098%);fill-opacity:1;" d="M 10.808594 21.925781 C 10.824219 21.925781 10.839844 21.925781 10.859375 21.925781 C 10.867188 22.148438 10.875 22.375 10.882812 22.597656 C 10.886719 22.671875 10.886719 22.75 10.890625 22.824219 C 10.90625 23.222656 10.921875 23.605469 10.859375 24 C 10.84375 24 10.824219 24 10.808594 24 C 10.75 23.777344 10.753906 23.558594 10.765625 23.328125 C 10.765625 23.289062 10.765625 23.25 10.765625 23.207031 C 10.769531 23.078125 10.777344 22.953125 10.78125 22.824219 C 10.78125 22.738281 10.785156 22.648438 10.789062 22.5625 C 10.792969 22.351562 10.800781 22.136719 10.808594 21.925781 Z M 10.808594 21.925781 "/>
</g>
</svg>`;

let tooltip: HTMLDivElement;
let popperInstance: Instance | undefined;
let currentColors: ChessboardColours | null = null;
// For dark mode
let isDarkMode = false;
let isDefaultDarkMode = true;
// For ignoring chess rules toggle
let ignoreRules = false;
// For notations
let notationType: "algebraic" | "descriptive" | "iccf" = "algebraic";
// For dragging
let isDragging = false;
let dragOffsetX = 0;
let dragOffsetY = 0;
// For password meter
// declare var zxcvbn: any;

// DARK MODE

// Initialising Dark Mode
chrome.storage.sync.get(["chessboardColours", "isDefaultDarkMode", "ignoreRules", "notationType"], (result: { [key: string]: any }) => {
	if (result["chessboardColours"]) {
		currentColors = result["chessboardColours"] as ChessboardColours;
		updateColours(currentColors);
	}

	if (result.hasOwnProperty("isDefaultDarkMode")) {
		isDefaultDarkMode = result["isDefaultDarkMode"] as boolean;
	}

	if (isDefaultDarkMode) {
		isDarkMode = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
	} else if (currentColors) {
		isDarkMode = currentColors.darkMode;
	}

	if (result.hasOwnProperty("ignoreRules")) {
        ignoreRules = result["ignoreRules"] as boolean;
    }

	if (result["notationType"]) {
        notationType = result["notationType"];
    }

	updateDarkMode();
});

function updateDarkMode() {
	const chessBoard = document.getElementById("cl-chess-board");
	if (chessBoard) {
		chessBoard.classList.toggle("dark-mode", isDarkMode);
	}
}

// For colour settings
export interface ChessboardColours {
	darkBlock: string;
	lightBlock: string;
	piece: string;
	highlightValid: string;
	highlightInvalid: string;
	darkMode: boolean;
}

const chessPieces = {
	king: "♚",
	queen: "♛",
	rook: "♜",
	bishop: "♝",
	knight: "♞",
	pawn: "♟"
};

enum MoveValidity {
	NONE = 0,
	VALID = 1,
	INVALID = 2
}

let validMoveBoard = [
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0],
	[0, 0, 0, 0, 0, 0, 0, 0]
];

let virtualChessBoard = [
	["", "", "", "", "", "", "", ""],
	["", "", "", "", "", "", "", ""],
	["", "", "", "", "", "", "", ""],
	["", "", "", "", "", "", "", ""],
	["", "", "", "", "", "", "", ""],
	["", "", "", "", "", "", "", ""],
	["♟", "♟", "♟", "♟", "♟", "♟", "♟", "♟"],
	["♜", "♞", "♝", "♚", "♛", "♝", "♞", "♜"]
];

let willResetBoard = false;

let hasKingMoved = false;
let hasRook1Moved = false;
let hasRook2Moved = false;

let focusedInput: HTMLInputElement;
let selectedPiece = "";
let selectedPieceRow = -1;
let selectedPieceCol = -1;

// DRAGGING

function enableDragging(element: HTMLElement) {
	const dragHandle = element.querySelector(".cl-drag-handle") as HTMLElement;

	dragHandle.addEventListener("mousedown", (e: MouseEvent) => {
		isDragging = true;
		dragOffsetX = e.clientX - element.offsetLeft;
		dragOffsetY = e.clientY - element.offsetTop;
	});

	document.addEventListener("mousemove", (e: MouseEvent) => {
		if (isDragging) {
			element.style.left = `${e.clientX - dragOffsetX}px`;
			element.style.top = `${e.clientY - dragOffsetY}px`;
		}
	});

	document.addEventListener("mouseup", () => {
		isDragging = false;
	});
}

// SETTINGS

function updateColours(colours: ChessboardColours) {
	document.documentElement.style.setProperty("--dark-block-colour", colours.darkBlock);
	document.documentElement.style.setProperty("--light-block-colour", colours.lightBlock);
	document.documentElement.style.setProperty("--piece-colour", colours.piece);
	document.documentElement.style.setProperty("--highlight-valid-colour", colours.highlightValid);
	document.documentElement.style.setProperty("--highlight-invalid-colour", colours.highlightInvalid);

	isDarkMode = colours.darkMode;
	updateDarkMode();
}

// SYMBOLS

let symbolIndex = 0;
let isSymbolModeActive = false;
const symbols = ["!", "?", "*", ")", "&", "$", "{", "£", "@", "}", "_", "[", "^", "#", "]", "("];

function toggleSymbolMode() {
	isSymbolModeActive = !isSymbolModeActive;
	const symbolBtn = document.getElementById("cl-symbol-btn");

	if (symbolBtn) {
		if (symbolBtn.classList.contains("cl-symbol-btn-on")) {
			symbolBtn.classList.remove("cl-symbol-btn-on");
			symbolBtn.classList.add("cl-symbol-btn-off");
		} else {
			symbolBtn.classList.add("cl-symbol-btn-on");
			symbolBtn.classList.remove("cl-symbol-btn-off");
		}

		symbolBtn.textContent = isSymbolModeActive ? "⁈ [On]" : "⁈";
	}
}

// PASSWORD METER

function calculatePasswordStrength(password: string): number {
	const result = zxcvbn(password);
	return result.score;
}

function getPasswordFeedback(password: string): any {
	const result = zxcvbn(password);
	return result.feedback;
}

function updatePasswordStrengthMeter(password: string) {
	const strength = calculatePasswordStrength(password);
	const feedback = getPasswordFeedback(password);
	const meter = document.getElementById("cl-password-strength-meter") as HTMLDivElement;
	const text = document.getElementById("cl-password-strength-text") as HTMLDivElement;

	let percentage = 0;
	if (strength === 0) {
		percentage = 10;
	} else {
		percentage = (strength / 4) * 100;
	}
	meter.style.width = `${percentage}%`;

	let color, strengthText;

	switch (strength) {
		case 0:
			color = "#ff4d4d";
			strengthText = "Very Weak";
			break;
		case 1:
			color = "#ffa64d";
			strengthText = "Weak";
			break;
		case 2:
			color = "#ffff4d";
			strengthText = "Moderate";
			break;
		case 3:
			color = "#4dff4d";
			strengthText = "Strong";
			break;
		case 4:
			color = "#00cc00";
			strengthText = "Very Strong";
			break;
		default:
			color = "transparent";
			strengthText = "";
			break;
	}

	meter.style.backgroundColor = color;
	text.textContent = strengthText;
	text.style.color = color;
}

// RESET

function resetChessboard() {
	const initialBoard = [
		["", "", "", "", "", "", "", ""],
		["", "", "", "", "", "", "", ""],
		["", "", "", "", "", "", "", ""],
		["", "", "", "", "", "", "", ""],
		["", "", "", "", "", "", "", ""],
		["", "", "", "", "", "", "", ""],
		["♟", "♟", "♟", "♟", "♟", "♟", "♟", "♟"],
		["♜", "♞", "♝", "♚", "♛", "♝", "♞", "♜"]
	];

	for (let i = 0; i < 8; i++) {
		for (let j = 0; j < 8; j++) {
			virtualChessBoard[i][j] = initialBoard[i][j];
		}
	}

	symbolIndex = 0;
	unselectPiece();
	paintBoard(false);

	if (focusedInput) {
		focusedInput.value = "";
		updatePasswordStrengthMeter("");
	}

	hasKingMoved = false;
	hasRook1Moved = false;
	hasRook2Moved = false;
}

// CHESSBOARD

const popperFactory = (element: Element) => {
	popperInstance = createPopper(element, tooltip, {
		placement: "right",
		strategy: "fixed",
		modifiers: [
			{
				name: "offset",
				options: {
					offset: [0, -40]
				}
			}
		]
	});
};

const handleFocus = (e: FocusEvent) => {
	if (!e.target || !(e.target instanceof HTMLInputElement)) {
		return;
	}

	if (focusedInput != e.target) {
		willResetBoard = true;
	} else {
		willResetBoard = false;
	}

	focusedInput = e.target;
	popperFactory(e.target);
	tooltip.setAttribute("data-show", "");
	popperInstance?.update();
};

// HIGHLIGHTING

function isSquareEmpty(row: number, col: number): boolean {
	return virtualChessBoard[row][col] === "";
}

function unselectPiece() {
	selectedPiece = "";
	selectedPieceCol = -1;
	selectedPieceRow = -1;

	// Reset highlights
	resetHighlights();
}

function resetHighlights() {
	validMoveBoard = [
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0]
	];
}

function highlightValidMoves(moves: [number, number][]) {
	const chessContainer = document.getElementById("cl-chess-container");

	if (!chessContainer) return;

	validMoveBoard = [
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0],
		[0, 0, 0, 0, 0, 0, 0, 0]
	];

	// New Valid Highlights
	for (const [row, col] of moves) {
		validMoveBoard[row][col] = isSquareEmpty(row, col) ? MoveValidity.VALID : MoveValidity.INVALID;
	}

	paintBoard(false);
}

function getAnyMoves(row: number, col: number): [number, number][] {
    const moves: [number, number][] = [];
    
    // Iterate over the entire board (8x8 grid)
    for (let r = 0; r < 8; r++) {
        for (let c = 0; c < 8; c++) {
            // Skip the current piece's position
            if (r === row && c === col) {
                continue;
            }

            // Only add the move if the square is empty
            if (isSquareEmpty(r, c)) {
                moves.push([r, c]);
            }
        }
    }

    return moves;
}


function getPawnMoves(row: number, col: number): [number, number][] {
	const moves: [number, number][] = [];
	if (row > 0 && isSquareEmpty(row - 1, col)) {
		moves.push([row - 1, col]);
		// Starting position, allows 2 steps
		if (row === 6 && isSquareEmpty(row - 2, col)) {
			moves.push([row - 2, col]);
		}
	}
	return moves;
}

function getRookMoves(row: number, col: number): [number, number][] {
	const moves: [number, number][] = [];
	const directions = [
		[1, 0],
		[0, 1],
		[-1, 0],
		[0, -1]
	];
	for (const [dx, dy] of directions) {
		for (let i = 1; i < 8; i++) {
			const newRow = row + i * dx; // To keep moving in that direction
			const newCol = col + i * dy;
			if (!addMove(moves, newRow, newCol)) {
				break;
			}
		}
	}
	return moves;
}

function getKnightMoves(row: number, col: number): [number, number][] {
	const moves: [number, number][] = [];
	const directions = [
		[-2, -1],
		[-2, 1],
		[-1, -2],
		[-1, 2],
		[1, -2],
		[1, 2],
		[2, -1],
		[2, 1]
	];
	for (const [dx, dy] of directions) {
		const newRow = row + dx;
		const newCol = col + dy;
		addMove(moves, newRow, newCol);
	}
	return moves;
}

function getBishopMoves(row: number, col: number): [number, number][] {
	const moves: [number, number][] = [];
	const directions = [
		[1, 1],
		[1, -1],
		[-1, 1],
		[-1, -1]
	];
	for (const [dx, dy] of directions) {
		for (let i = 1; i < 8; i++) {
			const newRow = row + i * dx; // To keep moving in that direction
			const newCol = col + i * dy;
			if (!addMove(moves, newRow, newCol)) break;
		}
	}
	return moves;
}

function getQueenMoves(row: number, col: number): [number, number][] {
	return getRookMoves(row, col).concat(getBishopMoves(row, col));
}

function getKingMoves(row: number, col: number): [number, number][] {
	const moves: [number, number][] = [];
	for (let dx = -1; dx <= 1; dx++) {
		for (let dy = -1; dy <= 1; dy++) {
			if (dx !== 0 || dy !== 0) {
				addMove(moves, row + dx, col + dy); // Only one step in any direction
			}
		}
	}

	let canCastleShort = false;
	let canCastleLong = false;

	if (!hasKingMoved) {
		if (!hasRook1Moved) {
			if (col === 3) {
				if (isSquareEmpty(row, 1) && isSquareEmpty(row, 2)) {
					canCastleShort = true;
				}
			} else if (col === 4) {
				if (isSquareEmpty(row, 1) && isSquareEmpty(row, 2) && isSquareEmpty(row, 3)) {
					canCastleLong = true;
				}
			}
		}

		if (!hasRook2Moved) {
			if (col === 3) {
				if (isSquareEmpty(row, 4) && isSquareEmpty(row, 5) && isSquareEmpty(row, 6)) {
					canCastleLong = true;
				}
			} else if (col === 4) {
				if (isSquareEmpty(row, 5) && isSquareEmpty(row, 6)) {
					canCastleShort = true;
				}
			}
		}

		if (canCastleShort) {
			addMove(moves, row, col === 3 ? 1 : 6);
		}

		if (canCastleLong) {
			addMove(moves, row, col === 3 ? 5 : 2);
		}
	}

	return moves;
}

function addMove(moves: [number, number][], row: number, col: number): boolean {
	// If within bounds
	if (row >= 0 && row < 8 && col >= 0 && col < 8) {
		moves.push([row, col]);

		if (!isSquareEmpty(row, col)) return false;
		return true;
	}

	return false;
}

function getValidMoves(piece: string, row: number, col: number): [number, number][] {
	if (ignoreRules) {
		return getAnyMoves(row, col);
	} else {
		switch (piece) {
			case chessPieces.pawn:
				return getPawnMoves(row, col);
			case chessPieces.rook:
				return getRookMoves(row, col);
			case chessPieces.knight:
				return getKnightMoves(row, col);
			case chessPieces.bishop:
				return getBishopMoves(row, col);
			case chessPieces.queen:
				return getQueenMoves(row, col);
			case chessPieces.king:
				return getKingMoves(row, col);
			default:
				return [];
		}
	}
}

// INIT

chrome.runtime.onMessage.addListener(
    (request: { type: string; colours: ChessboardColours; darkMode: boolean; isDefaultDarkMode: boolean; ignoreRules: boolean; notationType?: string }) => {
        if (request.type === "UPDATE_SETTINGS") {
			currentColors = request.colours;
			updateColours(request.colours);
			ignoreRules = request.ignoreRules;
			isDefaultDarkMode = request.isDefaultDarkMode;

			if (isDefaultDarkMode) {
				isDarkMode = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
			} else {
				isDarkMode = request.darkMode;
			}

			if (request.notationType && (request.notationType === "algebraic" || request.notationType === "descriptive" || request.notationType === "iccf")) {
                notationType = request.notationType;
            }

			updateDarkMode();
		}
	}
);

const paintBoard = (firstTime?: boolean) => {
	if (firstTime) {
		const chessBoard = document.createElement("div");
		chessBoard.id = "cl-chess-board";
		chessBoard.innerHTML = `<div class="cl-chess-board-container">
			<div class="cl-header-container">
				<div class="cl-drag-handle">☰</div>
				<div class="cl-header">ChessLock</div>
				<div class="cl-button-container">
					<button class="cl-btn cl-symbol-btn-off" id="cl-symbol-btn" title="Add symbols after notation">⁈</button>
					<button class="cl-btn" id="cl-reset-btn" title="Reset the chessboard and input">↺</button>
					<button class="cl-btn" id="cl-cls-btn">✖</button>
				</div>
			</div>
			<div id="cl-chess-container">${`<div>${`<div></div>`.repeat(8)}</div>`.repeat(8)}</div>
		</div>`;
		chessBoard.innerHTML += `
		<div id="cl-password-strength-container">
			<div id="cl-password-strength-meter"></div>
			<div id="cl-password-strength-text"></div>
			<div id="cl-password-warning"></div>
			<div id="cl-password-suggestions"></div>
		</div>`;
		document.body.appendChild(chessBoard);
		updateDarkMode();
	}

	const chessContainer = document.getElementById("cl-chess-container");

	if (chessContainer) {
		for (let i = 0; i < 8; i++) {
			for (let j = 0; j < 8; j++) {
				const isDarkSquare = j % 2 === (i % 2 === 0 ? 1 : 0);
				const classesToAppend: string[] = [];

				if (isDarkSquare) {
					classesToAppend.push("cl-chess-piece-dark");
				} else {
					classesToAppend.push("cl-chess-piece-light");
				}

				if (validMoveBoard[i][j] !== MoveValidity.NONE) {
					classesToAppend.push(`cl-highlight-${validMoveBoard[i][j]}`);
				}

				const extraClasses = classesToAppend.join(" ");

				if (virtualChessBoard[i][j]) {
					chessContainer.children[i].children[j].innerHTML =
						`<span class="cl-chess-piece ${extraClasses}" id="cl-chesspiece-${i}-${j}" data-row="${i}" data-column="${j}">
                            ${virtualChessBoard[i][j]}
                        </span>`;
				} else {
					chessContainer.children[i].children[j].innerHTML =
						`<span class="${extraClasses}" id="cl-chesssquare-${i}-${j}" data-row="${i}" data-column="${j}"></span>`;
				}
			}
		}
	}
};

// Algebraic Notation

function getPieceNotation(pieceType: string) {
	switch (pieceType) {
		case chessPieces.king:
			return "K";
		case chessPieces.queen:
			return "Q";
		case chessPieces.knight:
			return "N";
		case chessPieces.bishop:
			return "B";
		case chessPieces.rook:
			return "R";
		case chessPieces.pawn:
			return "";
		default:
			throw new Error("Unknown");
	}
}

function getColumnNotation(column: number) {
	return String.fromCharCode(97 + column);
}

function getRowNotation(row: number) {
	return `${8 - row}`;
}

function getAlgebraicChessNotation(pieceType: string, newRow: number, newColumn: number) {
	let notation = "";
	notation += getPieceNotation(pieceType);
	notation += getColumnNotation(newColumn);
	notation += getRowNotation(newRow);

	if (isSymbolModeActive) {
		notation += symbols[symbolIndex];
		symbolIndex = (symbolIndex + 1) % symbols.length;
	}

	return notation;
}

// Descriptive Row Notation (based on https://www.chess.com/blog/chess_dot_tom/how-to-read-descriptive-notation)

function getDescriptiveColumnNotation(column: number) {
    const columns = ["QR", "QN", "QB", "Q", "K", "KB", "KN", "KR"];
    return columns[column];
}

function getDescriptiveRowNotation(row: number) {
    return `${row + 1}`; 
}

function getDescriptiveChessNotation(pieceType: string, newRow: number, newColumn: number) {
    let notation = "";
    notation += getPieceNotation(pieceType);
    notation += getDescriptiveColumnNotation(newColumn);
    notation += getDescriptiveRowNotation(newRow);

    if (isSymbolModeActive) {
        notation += symbols[symbolIndex];
        symbolIndex = (symbolIndex + 1) % symbols.length;
    }

    return notation;
}

// ICCF Notation

function getICCFNotation(row: number, col: number) {
	let notation = "";
	const file = col + 1;
    const rank = row + 1;
	notation = `${file}${rank}`;

	if (isSymbolModeActive) {
        notation += symbols[symbolIndex];
        symbolIndex = (symbolIndex + 1) % symbols.length;
    }

    return notation;
}

function getChessNotation(pieceType: string, newRow: number, newColumn: number) {
	switch (notationType) {
		case "descriptive":
			return getDescriptiveChessNotation(pieceType, newRow, newColumn);
		case "iccf":
			return getICCFNotation(newRow, newColumn);
		case "algebraic":
		default:
			return getAlgebraicChessNotation(pieceType, newRow, newColumn);
	}
}

document.addEventListener("DOMContentLoaded", () => {
	tooltip = document.createElement("div");
	tooltip.id = "cl-tooltip";
	tooltip.role = "tooltip";
	tooltip.innerHTML = `<button id="cl-show-chessboard">${chessIconSvg}</button>`;
	document.body.appendChild(tooltip);

	const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
	isDarkMode = prefersDarkScheme.matches;

	prefersDarkScheme.addEventListener("change", (e) => {
		if (isDefaultDarkMode) {
			isDarkMode = e.matches;
			updateDarkMode();
		}
	});

	paintBoard(true);

	const chessBoard = document.getElementById("cl-chess-board");
	if (chessBoard) {
		enableDragging(chessBoard);
	}

	if (currentColors) {
		updateColours(currentColors);
	} else {
		chrome.storage.sync.get("chessboardColours", (result: { [key: string]: any }) => {
			if (result["chessboardColours"]) {
				updateColours(result["chessboardColours"] as ChessboardColours);
			}
		});
	}

	document.addEventListener("click", (e: MouseEvent) => {
		if (!e.target || !(e.target instanceof HTMLElement)) {
			return;
		}

		const chessBoard = document.getElementById("cl-chess-board");

		if (!chessBoard) return;

		if (e.target.id === "cl-show-chessboard") {
			chessBoard.style.visibility = "visible";
			updateDarkMode();

			if (willResetBoard) {
				resetChessboard();
			}
		} else if (e.target.id === "cl-cls-btn") {
			chessBoard.style.visibility = "hidden";
		} else if (e.target.id === "cl-reset-btn") {
			resetChessboard();
		} else if (e.target.id === "cl-symbol-btn") {
			toggleSymbolMode();
		} else if (e.target.id.startsWith("cl-chesspiece")) {
			const row = e.target.dataset["row"];
			const column = e.target.dataset["column"];

			if (row && column && Number.isInteger(parseInt(row)) && Number.isInteger(parseInt(column))) {
				const nrow = parseInt(row);
				const ncol = parseInt(column);

				const piece = virtualChessBoard[nrow][ncol];
				selectedPiece = piece;
				selectedPieceRow = nrow;
				selectedPieceCol = ncol;

				if (piece) {
					const validMoves = getValidMoves(piece, nrow, ncol);
					highlightValidMoves(validMoves);
				}
			}
		} else if (e.target.id.startsWith("cl-chesssquare")) {
			const row = e.target.dataset["row"];
			const column = e.target.dataset["column"];

			if (!focusedInput || !selectedPiece) return;

			if (row && column && Number.isInteger(parseInt(row)) && Number.isInteger(parseInt(column))) {
				const nrow = parseInt(row);
				const ncol = parseInt(column);

				if (validMoveBoard[nrow][ncol] == MoveValidity.VALID) {
					let isPromotion = false;
					let isCastleShort = false;
					let isCastleLong = false;

					if (selectedPiece === chessPieces.pawn && nrow === 0) {
						selectedPiece = chessPieces.queen;
						isPromotion = true;
					} else if (selectedPiece === chessPieces.king) {
						hasKingMoved = true;

						const difference = ncol - selectedPieceCol;

						if (Math.abs(difference) === 2) {
							// You are castling
							if (difference < 0) {
								// Rook 1
								virtualChessBoard[selectedPieceRow][0] = "";
								virtualChessBoard[selectedPieceRow][ncol + 1] = chessPieces.rook;
							} else {
								// Rook 2
								virtualChessBoard[selectedPieceRow][7] = "";
								virtualChessBoard[selectedPieceRow][ncol - 1] = chessPieces.rook;
							}

							if (
								(selectedPieceCol === 3 && difference < 0) ||
								(selectedPieceCol === 4 && difference > 0)
							)
								isCastleShort = true;
							if (
								(selectedPieceCol === 3 && difference > 0) ||
								(selectedPieceCol === 4 && difference < 0)
							)
								isCastleLong = true;
						}
					} else if (selectedPiece === chessPieces.rook) {
						if (selectedPieceRow === 7 && selectedPieceCol === 0) {
							hasRook1Moved = true;
						} else if (selectedPieceRow === 7 && selectedPieceCol === 7) {
							hasRook2Moved = true;
						}
					}

					virtualChessBoard[nrow][ncol] = selectedPiece;
					virtualChessBoard[selectedPieceRow][selectedPieceCol] = "";

					if (isPromotion) {
						switch (notationType) {
							case "descriptive":
								focusedInput.value += `P-${getDescriptiveColumnNotation(ncol)}${getDescriptiveRowNotation(nrow)}(Q)`;
								break;
							case "iccf":
								focusedInput.value += `${getICCFNotation(nrow, ncol)}=5`; // 5 = Q
								break;
							case "algebraic":
							default:
								focusedInput.value += `${getColumnNotation(ncol)}${getRowNotation(nrow)}=Q`;
								break;
						}
					} else if (isCastleShort) {
						switch (notationType) {
							case "iccf":
								focusedInput.value += "5178"; // Short castling notation: King to 7, Rook to 8
								break;
							case "descriptive":
							case "algebraic":
							default:
								focusedInput.value += "O-O";
								break;
						}
					} else if (isCastleLong) {
						switch (notationType) {
							case "iccf":
								focusedInput.value += "5138"; // Long castling notation: King to 3, Rook to 8
								break;
							case "descriptive":
							case "algebraic":
							default:
								focusedInput.value += "O-O-O";
								break;
						}
					} else {
						focusedInput.value += getChessNotation(selectedPiece, nrow, ncol);
					}					

					updatePasswordStrengthMeter(focusedInput.value);
					unselectPiece();
				}

				paintBoard(false);
			}
		} else if (e.target instanceof HTMLInputElement && e.target.type === "password") {
			return;
		}

		if (e.target.closest(".cl-button-container")) {
			return;
		}

		tooltip.removeAttribute("data-show");
	});

	const inputElements = document.getElementsByTagName("input");

	for (const inputElement of inputElements) {
		if (inputElement.type === "password") {
			inputElement.addEventListener("focus", handleFocus);
		}
	}

	const handleNewInputElements: MutationCallback = (mutations) => {
		mutations.forEach((mutation) => {
			mutation.addedNodes.forEach((node) => {
				if (node.nodeType === Node.ELEMENT_NODE) {
					const element = node as Element;

					const inputs = element.querySelectorAll(
						`input[type="password"], input[name*="password"], input[id*="password"]`
					);

					inputs.forEach((input) => {
						if (input instanceof HTMLInputElement) {
							input.addEventListener("focus", handleFocus);
						}
					});

					if (element.shadowRoot) {
						const shadowInputs = element.shadowRoot.querySelectorAll(
							`input[type="password"], input[name*="password"], input[id*="password"]`
						);
						shadowInputs.forEach((input) => {
							if (input instanceof HTMLInputElement) {
								input.addEventListener("focus", handleFocus);
							}
						});
					}
				}
			});
		});
	};

	const observer = new MutationObserver(handleNewInputElements);
	observer.observe(document.body, { childList: true, subtree: true });

	document
		.querySelectorAll(`input[type="password"], input[name*="password"], input[id*="password"]`)
		.forEach((input) => {
			if (input instanceof HTMLInputElement) {
				input.addEventListener("focus", handleFocus);
			}
		});
});